webpackJsonp([12,13],{156:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),l=a(o),r=i(6),s=a(r),u=i(22),d=a(u),c=i(157),h=a(c),p=i(23),f=a(p),m=i(53),g=a(m),v=i(17),y=i(57),b=i(36),I=i(38),S=i(55),_=["textarea","input"],E=l.default.createClass({displayName:"Input",mixins:[h.default,f.default],getInitialState:function(){return this.theme=(0,v.getThemeHelper)(),this.store=(0,v.getStore)(),{}},handleChange:function(e){var t=this.props.data;this.store.dispatch((0,I.SET_VALUE)({id:t.id,value:e.target.value}))},handleBlur:function(e){var t=this.props.data;this.store.dispatch((0,I.BLUR_INPUT)({id:t.id,value:e.target.value}))},handleOpenWeChatScan:function(e){var t=this,n=this.props.data;(0,v.getWx)().scanQRCode().then(function(i){t.store.dispatch((0,I.SET_VALUE)({id:n.id,value:i.result}))})},renderTips:function(t){var n=this.props,i=n.data,a=n.fill,o=n.valid;if(!i.isWordLimit)return null;var r=i.wordLimitFrom,u=i.wordLimitTo,c=o&&this.hasError("tips");return s.default.isNumber(r)&&s.default.isNumber(u)?l.default.createElement("p",{className:(0,d.default)("fbc_tips"),key:"tips",id:"tip-"+i.id,style:t,"aria-label":(0,v.getLang)().ariaInputWordRange({from:r,to:u})},l.default.createElement("span",{className:(0,d.default)("fbc_tip_input",{error:c})},(a||"").length),"/"+r+"~"+u):s.default.isNumber(r)?l.default.createElement("p",{className:(0,d.default)("fbc_tips"),key:"tips",id:"tip-"+i.id,style:t,"aria-label":(0,v.getLang)().ariaInputWordLimitFormFunc({from:r})},l.default.createElement("span",{className:(0,d.default)("fbc_tip_input",{error:c})},(0,v.getLang)().cInputWordLimitFormFunc({num:r}))):s.default.isNumber(u)?l.default.createElement("p",{className:(0,d.default)("fbc_tips"),key:"tips",id:"tip-"+i.id,style:t,"aria-label":(0,v.getLang)().ariaInputWordLimitToFunc({to:u})},l.default.createElement("span",{className:(0,d.default)("fbc_tip_input",{error:c})},(a||"").length),"/"+u):null},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,r=t.layout,s=(0,v.getDeviceInfo)(),u=0===+n.isOnlySingle,c=s.isWx&&n.isUseWeChatScan,h=_.indexOf(n.type)===-1?y.FIELD_INFO_MAPPING[n.type]:null,p=this.getComponentLayoutStyleInfo(),f=u?"textarea":"input",m=o&&o.length>0;return l.default.createElement("div",{className:(0,d.default)("fb_component",(0,S.getComponentType)(n)),id:n.id,style:i},l.default.createElement("div",{className:"fb_componentText",style:p?p.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),l.default.createElement("div",{className:"fb_componentBody",style:p?p.bodyStyle:null},l.default.createElement("div",{className:(0,d.default)("fbc_content","fbc_widthCp",{isUseWeChatScan:c}),style:{width:(this.isMobile()||r.isSqueeze?100:10*(n.cpWidth||8))+"%",marginTop:p?0:null}},l.default.createElement(g.default,{className:(0,d.default)("fbc_input",{textarea:u,error:m}),component:f,inValid:m,tabIndex:0,deviceInfo:s,style:u?this.theme.getTextareaBoxStyle():this.theme.getInputBoxStyle(this.theme.NORMAL,!!h),inputStyle:this.theme.getInputBoxExtraStyle(),icon:h?h.icon:null,iconStyle:{default:this.theme.getInputBoxIconStyle(this.theme.NORMAL),active:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),error:this.theme.getInputBoxIconStyle(this.theme.ERROR)},"aria-labelledby":this.ariaLabelTriggerOrder(),"aria-required":n.isRequired,"aria-invalid":m,onChange:this.handleChange,onBlur:this.handleBlur,value:a||"",placeholder:n.placeholder}),c?l.default.createElement(b.BaseBtn,{className:"iconfont fbc_scanIcon",style:{default:this.theme.getInputBoxBtnStyle(this.theme.NORMAL),active:this.theme.getInputBoxBtnStyle(this.theme.ACTIVE)},onClick:this.handleOpenWeChatScan},String.fromCharCode(58960)):null),l.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":""+(u?(0,v.getLang)().ariaMultiLine+" ":"")+(n.placeholder||"")+"."})))}});n.default=E,t.exports=n["default"]},157:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t){return c.default.createElement("a",{className:"fbc_descriptionLink",href:(0,p.autoMbrmLinkify)(t.data.url),tabIndex:1,target:"_blank",rel:"noreferrer",key:"linkDom"+t.key},t.content,c.default.createElement("span",{className:"iconfont"},String.fromCharCode(59086)))}Object.defineProperty(n,"__esModule",{value:!0});var l=i(6),r=a(l),s=i(22),u=a(s),d=i(19),c=a(d),h=i(25),p=i(8),f=i(17),m=i(27),g=a(m),v=i(55),y={},b=(0,h.crateTextRender)({entity:{LINK:{component:o}}}),I=function(t){return r.default.isPlainObject(t)?t:{type:t,info:null}},S=function(t,n){for(var i=0,a=n[i];"tips"===a||"tipsHint"===a;)i++,a=n[i];var o=I(a),l=o.type,s=o.info,u=(0,f.getLang)(),d=(0,f.getFormStructure)(),c=(0,v.getComponentType)(t);switch(l){case"required":switch(c){case"multiLevel":case"ctcf_8":return u.errMultiRequired;case"rank":return u.errRankRequired;case"tabular":return u.errTabularRequired;case"number":case"currency":return u.errNumber;default:return u.errRequired}case"number":return u.errNumber;case"numberNegative":return u.errPositiveNumber;case"numberSaveRange":return u.errNumberRange;case"numberDecimals":return u.errNumberInteger;case"numberDecimalLength":return u.errDecimalLength;case"mobileRequired":return u.errMobileRequired;case"inputRequired":var h=null;return s&&(h=[],r.default.forEach(t.options,function(t){s.indexOf(t.sId)>-1&&h.push(t.value)}),s.indexOf(t.otherId)>-1&&h.push(t.otherOptionTitle||u.cOptionOtherDefault),h=h.join("/")),u.errOptionInputRequiredFunc({options:h});case"optionQuota":var p=null;return s&&(p=[],r.default.forEach(t.options,function(t){s.indexOf(t.sId)>-1&&p.push(t.value)}),s.indexOf(t.otherId)>-1&&p.push(t.otherOptionTitle||u.cOptionOtherDefault),p=p.join("/")),u.errOptionQuotaFullErrFunc({options:p});case"commodityQuota":var m=null;return s&&(m=[],r.default.forEach(t.commodities,function(t){s.indexOf(t.sId)>-1&&m.push(t.name)})),u.errCommodityQuotaFullErrFunc({options:m});case"duplicateData":return u.errDuplicateData;case"contentRegex":return u.errContentReg;case"mobileAuthCodeRequired":return u.errMobileVCRequired;case"mobileAuthRegex":return u.errMobileAreaUnavailable;case"requestFailed":return u.errMobileExtResourceUnavailable;case"requestNetFailed":return u.errMobileNetError;case"verificationLimit":return u.errMobileVerificationLimit;case"mobileAuthCodeError":return u.errMobileVCError;case"attachmentLimitNumber":return u.cUploadFailedILLEGAL_SUFFIX;case"attachmentResolution":return u.cUploadFailedILLEGAL_FILE_RESOLUTION;case"attachmentType":case"attachmentSize":case"attachmentIllegal":return u.cUploadFailedILLEGAL_SUFFIX;case"cnIdLocationRange":return u.ctcfLocationValid;case"calendarTypeError":return u.errCalendarType;case"calendarValidError":return u.errCalendarValid;case"limitAmountExceed":if(d&&d.extensions&&d.extensions.inFormPayInfo)return u.errCommodityAmountOverFunc({num:d.extensions.inFormPayInfo.limitAmountTo});break;case"limitQuantityExceed":if(d&&d.extensions&&d.extensions.inFormPayInfo)return u.errCommodityQuantityOverFunc({num:d.extensions.inFormPayInfo.limitQuantityTo});break;default:return null}};n.default=r.default.assign({},g.default,{getContentWidth:function(){var t=this.props,n=t.data,i=t.layout,a=(0,f.getFormStructure)(),o=a.style||{},l=o.bodyStyle||{},r=(0,f.getStaticData)(i.isSqueeze?"CP_GROUP_ITEM_PADDING_LR":"CP_PADDING_LR"),s=((0,f.getFormDisplayWidth)()-(i.isSqueeze?(0,f.getStaticData)("CP_GROUP_PADDING_LR"):0))*i.width;if(!this.isMobile()&&n.cpLayout&&2===+n.cpLayout){var u=l.cpTitleWidth||20;s=Math.floor(s*(1-u/100))}return s-r},getRawContent:function(t){return r.default.isString(t)?t:r.default.isArray(t)?t.join("\n"):void 0},renderRichContent:function(t,n,i){var a=(0,f.getFormStructure)();a.extensions.renderRichText||(n=null);var o=t;return i&&(o=this.contentEntity(o)),b.render(o,n)},renderTitle:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,i=n.htmlEntityMode,a=void 0!==i&&i,o=this.props,l=o.data,r=o.index,s=o.onRenderComponentNo,d=s(r);return c.default.createElement("p",{className:(0,u.default)("fbc_title"),style:t,id:"t-"+l.id},d?c.default.createElement("span",{className:"fbct_qNo"},d):null,this.renderRichContent(l.title||"",l.title_style||null,a),l.isRequired?c.default.createElement("span",{className:"fbc_required",tabIndex:-1,"aria-label":"("+(0,f.getLang)().ariaRequired+")"},"*"):null)},renderSubtitle:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,i=n.htmlEntityMode,a=void 0!==i&&i,o=this.props.data;return o.subtitle&&0!==this.getRawContent(o.subtitle).length?c.default.createElement("p",{className:(0,u.default)("fbc_describe"),style:t,id:"sub-"+o.id},this.renderRichContent(o.subtitle||"",o.subtitle_style||null,a)):null},hasError:function(t){var n=!1,i=this.props.valid;return i&&r.default.forEach(i,function(i){if(r.default.isPlainObject(i)&&i.type===t||i===t)return n=i,!1}),n},renderError:function(t){var n=this.props,i=n.valid,a=n.data;return i?c.default.createElement("p",{className:(0,u.default)("fbc_errorTips"),style:t,id:"e-"+a.id},S(a,i)):null},ariaLabelTriggerOrder:function(){var t=this.props,n=t.valid,i=t.data,a="t-"+i.id,o="sub-"+i.id,l="tip-"+i.id,r="p-"+i.id,s="e-"+i.id,u=[a,o,l,r];return n&&(u=[s].concat(u)),u.join(" ")},getComponentLayoutStyleInfo:function(){var t=this.props,n=t.data,i=t.layout,a=(0,f.getFormStructure)().style||{},o=a.bodyStyle||{};if(this.isMobile())return null;if(n.cpLayout&&2===+n.cpLayout){var l={},r=o.cpTitleWidth||20,s=(n.cpWidth||8)/10;if(i.width<1?(l.titleStyle={float:"left",marginTop:1,width:105-100*s+"%"},l.bodyStyle={float:"left",marginTop:0,width:100*s-5+"%"}):(l.titleStyle={float:"left",marginTop:1,width:r+"%"},l.bodyStyle={float:"left",marginTop:0,width:100-r+"%"}),1===i.width&&(["input","textarea","number","currency","dropDown","attachment","multiLevel","name","email","mobile","tel","fax","website","dateTime_both","dateTime_date","dateTime_time","birthDate","IM","wechat","qq","skype","messenger","whatsApp","telegram","line","viber","SNS","weibo","linkedIn","twitter","facebook","instagram","mkGooglePlus"].indexOf(n.type)>-1||["ctcf_1","ctcf_2","ctcf_3","ctcf_4","ctcf_5","ctcf_6","ctcf_7","ctcf_8","ctcf_9","ctcf_11","ctcf_12"].indexOf(n.type)>-1||"rate"===n.type&&4===n.rateIcon||["gender","title","city","address","location"].indexOf(n.type)>-1&&2===n.componentType||["company","position","department"].indexOf(n.type)>-1&&2!==n.componentType)){var u=(s-r/100)/(s*(100-r)/100);if(u>0&&u<1&&u*s*100>30){var d=Math.round(100*u*(100-r))/100;l.bodyStyle.width=d+"%"}}return l}return null},unmount:function(){this.theme=null,this.style=null,this.store=null}}),t.exports=n["default"]},159:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),l=a(o),r=i(22),s=a(r),u=i(157),d=a(u),c=i(23),h=a(c),p=i(17),f=i(57),m=i(38),g=i(241),v=a(g),y=l.default.createClass({displayName:"MultipleInput",mixins:[d.default,h.default],getInitialState:function(){return this.theme=(0,p.getThemeHelper)(),this.store=(0,p.getStore)(),{}},handleChange:function(e,t){var n=this.props.data;this.store.dispatch((0,m.SET_MULTI_INPUT_VALUE)({id:n.id,idx:t,value:e.target.value}))},handleBlur:function(e,t){var n=this.props.data;this.store.dispatch((0,m.BLUR_MULTI_INPUT)({id:n.id,idx:t,value:e.target.value}))},handleIncreaseItem:function(e,t){var n=this.props.data;this.store.dispatch((0,m.ADD_MULTI_INPUT_ITEM)({id:n.id,idx:t}))},handleRemoveItem:function(e,t){var n=this.props.data;this.store.dispatch((0,m.REMOVE_MULTI_INPUT_ITEM)({id:n.id,idx:t}))},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,r=t.layout,u=(0,p.getDeviceInfo)(),d=1===n.isAcceptMulti,c=f.FIELD_INFO_MAPPING[n.type],h=this.getComponentLayoutStyleInfo(),m=o&&o.length>0;return l.default.createElement("div",{className:(0,s.default)("fb_component",n.type),id:n.id,style:i},l.default.createElement("div",{className:"fb_componentText",style:h?h.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderError(this.theme.getComponentErrorStyle())),l.default.createElement("div",{className:"fb_componentBody",style:h?h.bodyStyle:null},l.default.createElement("div",{className:(0,s.default)("fbc_content","fbc_widthCp"),style:{width:(this.isMobile()||r.isSqueeze?100:10*(n.cpWidth||8))+"%",marginTop:h?0:null}},l.default.createElement(v.default,{key:"inputGroup",deviceInfo:u,data:n,fill:a,inValid:m,ariaTriggerOrder:this.ariaLabelTriggerOrder(),valid:o,fieldExtInfo:c,contentWidth:this.getContentWidth(),onChange:this.handleChange,onBlur:this.handleBlur,limit:!d&&1,onIncreaseItem:this.handleIncreaseItem,onRemoveItem:this.handleRemoveItem})),l.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=y,t.exports=n["default"]},206:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),l=a(o),r=i(20),s=a(r),u=i(6),d=a(u),c=i(22),h=a(c),p=i(157),f=a(p),m=i(23),g=a(m),v=i(53),y=a(v),b=i(17),I=i(38),S=i(8),_=i(55),E=l.default.createClass({displayName:"Number",mixins:[f.default,g.default],getInitialState:function(){return this.theme=(0,b.getThemeHelper)(),this.store=(0,b.getStore)(),this.measureSize=d.default.debounce(this._measureSize,120),{unitWidth:null}},componentDidMount:function(){this.measureSize()},_measureSize:function(){var t=this,n=this.props.data;if(n.unit){this.fontInfo||(this.fontInfo=(0,S.getFontInfo)(s.default.findDOMNode(this.unitSpan)));var i=n.unit,a=function(n){return(0,S.getTextWidth)(i,n+"px/"+t.fontInfo.lineHeight+" "+t.fontInfo.font)},o=this.fontInfo.fontSize,l=null;l=a(o),this.setState({unitWidth:l})}},handleChange:function(e){var t=this.props.data;this.store.dispatch((0,I.SET_VALUE)({id:t.id,value:e.target.value}))},handleBlur:function(e){var t=this.props.data;this.store.dispatch((0,I.BLUR_NUMBER)({id:t.id,value:e.target.value}))},renderTips:function(t){var n=this.props,i=n.data,a=n.valid,o=a&&this.hasError("tips"),r=i.numRangeFrom,s=i.numRangeTo;if(!i.isNumRange)return null;var u=null;return d.default.isNumber(r)&&d.default.isNumber(s)?u=+r===+s?(0,b.getLang)().cNumberValueEqualFunc({number:r}):(0,b.getLang)().cNumberValueRangeHintFunc({numRangeFrom:r,numRangeTo:s}):d.default.isNumber(r)?u=(0,b.getLang)().cNumberValueMoreThanValueFunc({numRangeFrom:r}):d.default.isNumber(s)&&(u=(0,b.getLang)().cNumberValueLessThanValueFunc({numRangeTo:s})),u?l.default.createElement("p",{className:(0,h.default)("fbc_tips"),key:"tips",id:"tip-"+i.id,style:t,"aria-label":u},l.default.createElement("span",{className:(0,h.default)("fbc_tip_input",{error:o})},u)):null},refUnitSpan:function(t){this.unitSpan=t},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,r=t.layout,s=this.state.unitWidth,u=(0,b.getDeviceInfo)(),c=this.getComponentLayoutStyleInfo(),p=o&&o.length>0,f=(0,b.getCurrentLang)(),m=this.theme.getInputBoxStyle(this.theme.NORMAL,!1);return n.unit&&(m="ar"===f?d.default.assign({paddingLeft:s+8},m):d.default.assign({paddingRight:s+8},m)),l.default.createElement("div",{className:(0,h.default)("fb_component",(0,_.getComponentType)(n)),id:n.id,style:i},l.default.createElement("div",{className:"fb_componentText",style:c?c.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),l.default.createElement("div",{className:"fb_componentBody",style:c?c.bodyStyle:null},l.default.createElement("div",{className:(0,h.default)("fbc_content","fbc_widthCp"),style:{width:(this.isMobile()||r.isSqueeze?100:10*(n.cpWidth||8))+"%",marginTop:c?0:null}},l.default.createElement(y.default,{className:(0,h.default)("fbc_input",{error:p}),component:"input",inValid:p,tabIndex:0,deviceInfo:u,style:m,inputStyle:this.theme.getInputBoxExtraStyle(),iconStyle:{default:this.theme.getInputBoxIconStyle(this.theme.NORMAL),active:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),error:this.theme.getInputBoxIconStyle(this.theme.ERROR)},"aria-labelledby":this.ariaLabelTriggerOrder(),"aria-required":n.isRequired,"aria-invalid":p,onChange:this.handleChange,onBlur:this.handleBlur,value:a||"",placeholder:n.placeholder}),n.unit?l.default.createElement("span",{className:(0,h.default)("fbc_unit"),ref:this.refUnitSpan,style:this.theme.getInputBoxUnitStyle()},n.unit):null),l.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=E,t.exports=n["default"]},207:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}Object.defineProperty(n,"__esModule",{value:!0}),n.RateGroup=void 0;var l=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},r=i(6),s=a(r),u=i(19),d=a(u),c=i(157),h=a(c),p=i(23),f=a(p),m=i(17),g=i(22),v=a(g),y=i(36),b=i(38),I=i(8),S=i(55),_={1:"star",2:"heart",3:"thumb",4:"heatBar",5:"rose",6:"number"},E=d.default.createClass({displayName:"RateItem",mixins:[f.default],getInitialState:function(){return this._eventBind(this.props),{}},componentWillReceiveProps:function(t){t.index!==this.props.index&&this._eventBind(t)},_eventBind:function(t){this.handleMouseEnterHalf=this._mouseEnter.bind(this,t.index-.5),this.handleMouseLeaveHalf=this._mouseLeave.bind(this,t.index-.5),this.handleClickHalf=this._click.bind(this,t.index-.5),this.handleMouseEnter=this._mouseEnter.bind(this,t.index),this.handleMouseLeave=this._mouseLeave.bind(this,t.index),this.handleClick=this._click.bind(this,t.index)},_mouseEnter:function(t,e){var n=this.props.onMouseEnter;n&&n(e,t)},_mouseLeave:function(t,e){var n=this.props.onMouseLeave;n&&n(e,t)},_click:function(t,e){e.stopPropagation();var n=this.props.onChange;n&&n(e,t)},isSelected:function(t){var n=this.props.value;return t<=n},handleKeyDown:function(e){13!==e.keyCode&&32!==e.keyCode||this.handleClick(e)},render:function(){var t=this.props,n=t.allowHalf,i=t.position,a=t.index,o=t.style,l=i>a,r=i+.5===a,s=i===a,u=this.isSelected(a-.5),c=this.isSelected(a);return d.default.createElement("li",{className:(0,v.default)("fbc_rateItemWrapper",{"rateItem-prev-hover":l,"rateItem-current-hover":s,"rateItem-current-half-hover":r,"rateItem-fade":i&&c&&i<a,"rateItem-half-fade":i&&u&&i+.5<a}),style:o,role:"option",tabIndex:0,"aria-selected":c,"aria-label":a,"aria-live":"assertive",onKeyDown:this.handleKeyDown},d.default.createElement("span",{className:"fbc_rateItemContainer"},n?d.default.createElement(y.BaseBtn,{className:(0,v.default)("fbc_rateItem first",{selected:u}),onClick:this.handleClickHalf,onMouseEnter:this.handleMouseEnterHalf,onMouseLeave:this.handleMouseLeaveHalf}):null,d.default.createElement(y.BaseBtn,{className:(0,v.default)("fbc_rateItem",{selected:c}),onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave})))}}),C=d.default.createClass({displayName:"RateHeatBoxItem",mixins:[f.default],getInitialState:function(){return this.theme=(0,m.getThemeHelper)(),{}},handleMouseEnter:function(e){var t=this.props,n=t.onMouseEnter,i=t.index;n&&n(e,i)},handleMouseLeave:function(e){var t=this.props,n=t.onMouseLeave,i=t.index;n&&n(e,i)},handleClick:function(e){e.stopPropagation();var t=this.props,n=t.onChange,i=t.index;n&&n(e,i)},isSelected:function(t){var n=this.props.value;return t<=n},render:function(){var t=this.props,n=t.colorForm,i=t.colorTo,a=t.total,o=t.position,r=t.index,s=t.style,u=o>r,c=o===r,h=this.isSelected(r),p=(0,I.colorMix)(i,n,r/a);return d.default.createElement(y.BaseBtn,{component:"li",className:(0,v.default)("fbc_heatItem",{"heatItem-prev-hover":u,"heatItem-current-hover":c,"heatItem-fade":o&&h&&o<r}),style:l({},s,{width:"calc((100% - "+4*(a-1)+"px)/"+a+")",height:20,backgroundColor:h||u||c?p:null,borderColor:h||u||c?(0,I.lighten)(p,.1):null}),tabIndex:0,"aria-selected":h,"aria-label":r,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick})}}),T=d.default.createClass({displayName:"RateNumItem",mixins:[f.default],getInitialState:function(){return this.theme=(0,m.getThemeHelper)(),{}},handleMouseEnter:function(e){var t=this.props,n=t.onMouseEnter,i=t.index;n&&n(e,i)},handleMouseLeave:function(e){var t=this.props,n=t.onMouseLeave,i=t.index;n&&n(e,i)},handleClick:function(e){e.stopPropagation();var t=this.props,n=t.onChange,i=t.index;n&&n(e,i)},isSelected:function(t){var n=this.props.value;return t===n},render:function(){var t=this.props,n=t.position,i=t.index,a=t.style,o=n===i,l=this.isSelected(i),r=a;return(o||l)&&(r=s.default.assign({},r,this.theme.getRateNumberStyle())),d.default.createElement(y.BaseBtn,{component:"li",className:(0,v.default)("fbc_numberItem",{"numberItem-current-hover":o,"numberItem-fade":n&&l&&n!==i}),style:r,tabIndex:0,"aria-selected":l,"aria-label":i,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick},i)}}),x=d.default.createClass({displayName:"RateGroup",mixins:[f.default],getDefaultProps:function(){return{num:5}},getInitialState:function(){return this.theme=(0,m.getThemeHelper)(),{position:null}},handleMouseEnterGroup:function(){this.hoverActived=!0},handleMouseLeaveGroup:function(){this.hoverActived=!1,this.setState({position:!1})},handleMouseEnter:function(e,t){this.hoverActived&&this.setState({position:t})},handleMouseLeave:function(e,t){},renderTips:function(){var t=this.props.data,n=t.rateTipsLeft,i=t.rateTipsMiddle,a=t.rateTipsRight;return n||a||i?d.default.createElement("p",{className:"fbc_rateTips",style:this.theme.getComponentTipsStyle()},d.default.createElement("span",{className:"fbc_rateTipsText left"},n||" "),d.default.createElement("span",{className:"fbc_rateTipsText middle"},i||" "),d.default.createElement("span",{className:"fbc_rateTipsText right"},a||" ")):null},render:function(){var t=this.props,n=t.isMobile,i=t.num,a=t.onChange,r=t.type,s=t.value,u=t.data,c=t.contentWidth,h=o(t,["isMobile","num","onChange","type","value","data","contentWidth"]),p=u.isAllowHalf,f=u.isShowTips,m=u.tipsPosition,g=u.heatBarColorForm,y=u.heatBarColorTo,b=this.state.position,I=[],S=Math.min(+i,20),x={maxWidth:100/S+"%",width:n?38:null},O=null,N=E,L={style:x,position:b,value:s,type:r,allowHalf:p,onChange:a,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},M=!1;4===r?(N=C,L.colorForm=g,L.colorTo=y,L.total=S):6===r?(N=T,(n||c<420)&&c/S<20?(x.maxWidth=Math.floor(c/Math.ceil(S/2)),M=!0):38*S>=c&&(O={fontSize:12})):(n&&c<=38*S&&(O={paddingRight:10}),!n&&c<=33*S&&(x.maxWidth="calc("+100/S+"% - 5px)"));for(var R=0;R<S;R++)I.push(d.default.createElement(N,l({key:"rateItem"+R,index:R+1},L)));return d.default.createElement("div",{className:(0,v.default)("fbc_rateGroup",_[r||1]),tabIndex:0,"aria-labelledby":h["aria-labelledby"]},!f||null!=m&&1!==m?null:this.renderTips(),d.default.createElement("ul",{className:(0,v.default)("fbc_rateItemContent clear",{"rate_multiline":M}),style:O,onMouseEnter:this.handleMouseEnterGroup,onMouseLeave:this.handleMouseLeaveGroup},I),f&&2===m?this.renderTips():null)}});n.RateGroup=x;var O=d.default.createClass({displayName:"Rate",mixins:[h.default,f.default],getInitialState:function(){return this.theme=(0,m.getThemeHelper)(),this.store=(0,m.getStore)(),{}},handleRateChange:function(e,t){var n=this.props.data;this.store.dispatch((0,b.SET_RATE)({id:n.id,value:t}))},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.layout,l=this.getComponentLayoutStyleInfo();return d.default.createElement("div",{className:(0,v.default)("fb_component",(0,S.getComponentType)(n)),id:n.id,style:i},d.default.createElement("div",{className:"fb_componentText",style:l?l.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderError(this.theme.getComponentErrorStyle())),d.default.createElement("div",{className:"fb_componentBody",style:l?l.bodyStyle:null},d.default.createElement("div",{className:(0,v.default)("fbc_content fbc_widthCp"),style:{width:(this.isMobile()||o.isSqueeze||4!==n.rateIcon?100:10*(n.cpWidth||8))+"%",marginTop:l?0:null}},d.default.createElement(x,{type:n.rateIcon,num:n.rateMax,value:a,isMobile:this.isMobile(),data:n,contentWidth:this.getContentWidth(),"aria-labelledby":this.ariaLabelTriggerOrder(),onChange:this.handleRateChange}),d.default.createElement("div",{className:"clearB"})),d.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=O},208:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.Option=void 0;var o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},l=function(){function t(t,n){var i=[],a=!0,o=!1,l=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(t){o=!0,l=t}finally{try{!a&&s["return"]&&s["return"]()}finally{if(o)throw l}}return i}return function(n,i){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=i(19),s=a(r),u=i(6),d=a(u),c=i(22),h=a(c),p=i(157),f=a(p),m=i(23),g=a(m),v=i(17),y=i(36),b=i(86),I=i(38),S=i(53),_=a(S),E=i(55),C=i(8),T=n.Option=s.default.createClass({displayName:"Option",mixins:[g.default],handleClick:function(){var t=this.props,n=t.onSelect,i=t.data;n&&n(i.sId),this.operator.blur()},handleARIA_select:function(e){if(this.operator&&this.operator.isFocus()&&(13===e.keyCode||32===e.keyCode)){e.preventDefault();var t=this.props,n=t.onSelect,i=t.data;n&&n(i.sId)}},handleStopPropagation:function(e){e.stopPropagation()},handleTextBoxChange:function(e){var t=this.props,n=t.onInputChange,i=t.data;n&&n(i.sId,e.target.value)},refOperator:function(t){this.operator=t},renderLimit:function(t){var n=this.props,i=n.showLimit,a=n.tipsStyle;if(null!=t&&isFinite(t)){var o="";return i&&t>0?o=(0,v.getLang)().cQuotaRemainingFunc({remaining:t}):t<=0&&(o=(0,v.getLang)().cQuotaRemainingFull),s.default.createElement("span",{className:"fbc_optionTips","aria-label":", "+o+" ",style:a},o)}return null},renderExtInput:function(){var t=this.props,n=t.active,i=t.activeValue,a=t.afterInput,o=t.inputStyle,l=t.isRequired,r=t.inputExtStyle,u=t.inputInValid;if(n&&a){var c=d.default.isPlainObject(i)?i.value:"",p=(0,v.getDeviceInfo)();return s.default.createElement("div",{className:"fbc_optionInputWrapper"},s.default.createElement(_.default,{className:(0,h.default)("fbc_input","fbc_optionInput",{error:u}),deviceInfo:p,tabIndex:0,value:c,style:o,inputStyle:r,onTouchStart:this.handleStopPropagation,onMouseDown:this.handleStopPropagation,onKeyDown:this.handleStopPropagation,onClick:this.handleStopPropagation,onChange:this.handleTextBoxChange},l?s.default.createElement("span",{className:"fbc_required",style:r},"*"):null),s.default.createElement("div",{className:"clearB"}))}return null},render:function(){var t=this.props,n=t.data,i=t.isCheckbox,a=t.optionLayoutType,o=t.style,r=t.inValid,u=t.optStyle,d=t.active,c=t.afterInput,p=t.limitInfo,f=t.chooseMax,m=t.hideNoQuota,g=t.onRenderOptionNum,v=i?b.BaseCheckbox:b.BaseRadio,I=1/0;if(p){var S=(0,C.quotaCalculate)(p);I=S.remaining}if(m&&I<=0)return null;var _=I<=0||!d&&f,E=g(),T=l(E,2),x=T[0],O=T[1];return s.default.createElement(y.BaseBtn,{component:"li",className:(0,h.default)("fbc_optionsLi",{"displayAfterInput":d&&c,"error":r,"disabled":_,"clearB":a&&a>1&&x%a===1}),style:o,disabled:_,onClick:this.handleClick,onKeyDown:this.handleARIA_select,role:i?"checkbox":"radio","aria-disabled":_,"aria-checked":!!d,tabIndex:0,ref:this.refOperator},s.default.createElement(v,{className:(0,h.default)("fbc_optionButton"),disabled:_,active:d,style:u}),s.default.createElement("span",{className:"fbc_optionLabel"},O,n.value,this.renderLimit(I)),this.renderExtInput())}}),x=s.default.createClass({displayName:"Choice",mixins:[f.default,g.default],getInitialState:function(){return this.theme=(0,v.getThemeHelper)(),this.store=(0,v.getStore)(),{}},handleSelectOption:function(t){var n=this.props.data;this.store.dispatch((0,I.SELECT_OPT)({id:n.id,value:t}))},handleSetOptionInputValue:function(t,n){var i=this.props.data;this.store.dispatch((0,I.SET_OPT_EXT_VALUE)({id:i.id,data:{optId:t,value:n}}))},handleRenderOptionNum:function(){var t=this.props.data,n=++this.optionNum;return t.isAutoNo?[n,(0,E.OPTION_NUM)(n,t.autoNo)]:[n,null]},hasValue:function(t){var n=this.props.fill,i=!1;return d.default.forEach(n||[],function(n){if(t===n||d.default.isPlainObject(n)&&n.id===t)return i=!0,!1}),i},getActiveValue:function(t){var n=this.props.fill,i=null;return d.default.forEach(n||[],function(n){if(t===n||d.default.isPlainObject(n)&&n.id===t)return i=n,!1}),i},getOptionsLayoutType:function(){var t=this.props,n=t.data,i=t.inSqueeze,a=n.optionsLayout||0;return(this.isMobile()||i)&&(a=n.isAfterInput||n.isLimitOptions&&n.isShowOptionLimit&&n.optionsQuotaInfo?0:Math.min(2,a)),a},renderOptions:function(t){var n=this;this.optionNum=0;var i=this.props,a=i.data,l=i.fill,r=i.valid,u=a.type,c="checkbox"===u||a.isCheckbox,h=[],p=r&&r.length>0,f=1===a.isLimitChooseNum&&c,m=a.chooseNumTo,g=f&&null!=m&&""!==m,y=this.optionBlockStyle=this.optionBlockStyle||{default:this.theme.getOptionStyle(this.theme.NORMAL),hover:this.theme.getOptionStyle(this.theme.HOVER),active:this.theme.getOptionStyle(this.theme.ACTIVE),disabled:this.theme.getOptionStyle(this.theme.DISABLED)},b=this.hasError("inputRequired"),I={isCheckbox:c,inValid:p,optionLayoutType:t,showLimit:a.isShowOptionLimit,hideNoQuota:a.isHideFullOption,chooseMax:g&&l&&l.length>=+m,onSelect:this.handleSelectOption,onInputChange:this.handleSetOptionInputValue,onRenderOptionNum:this.handleRenderOptionNum,style:y,optStyle:this.theme.getOptionIconStyle(),inputStyle:this.theme.getChoiceInputBoxStyle(),inputExtStyle:this.theme.getInputBoxExtraStyle(),tipsStyle:this.theme.getComponentTipsStyle()},S=null;if(a.isLimitOptions&&a.optionsQuotaInfo&&(S=a.optionsQuotaInfo),d.default.forEach(a.options,function(t,i){var l=n.hasValue(t.sId),r=l?n.getActiveValue(t.sId):null,u=S&&S[t.sId]?S[t.sId]:null,d=b&&b.info&&b.info.indexOf(t.sId)>-1;h.push(s.default.createElement(T,o({data:t,key:"opt-"+t.sId,index:i,active:l,limitInfo:u,activeValue:r,afterInput:a.isAfterInput,isRequired:a.afterInputIsRequired,inputInValid:d},I)))}),1===a.isAddOtherOption){var _={sId:a.otherId,id:0,value:a.otherOptionTitle||(0,v.getLang)().cOptionOtherDefault},E=this.hasValue(_.sId),C=E?this.getActiveValue(_.sId):null,x=S&&S[_.sId]?S[_.sId]:null,O=b&&b.info&&b.info.indexOf(_.sId)>-1;h.push(s.default.createElement(T,o({data:_,key:"opt-"+_.sId,active:E,limitInfo:x,activeValue:C,inputInValid:O,afterInput:!0,isRequired:a.otherOptionIsRequired},I)))}return h},renderTips:function(t){var n=this.props,i=n.data,a=n.valid,o="checkbox"===i.type||i.isCheckbox;if(1===i.isLimitChooseNum&&o){var l=(0,v.getLang)(),r=a&&this.hasError("tips"),u=i.chooseNumFrom,d=i.chooseNumTo,c=null!=u&&""!==u,p=null!=d&&""!==d,f="";if(c&&p?f=+u===+d?l.cOptionsLimitEqualFunc({num:+u}):l.cOptionsLimitRangeFunc({numForm:+u,numTo:+d}):p?f=l.cOptionsLessThanNumFunc({numTo:+d}):c&&(f=l.cOptionsMoreThanNumFunc({
numForm:+u})),f)return s.default.createElement("p",{className:(0,h.default)("fbc_tips"),key:"tips",id:"tip-"+i.id,style:t,"aria-label":f},s.default.createElement("span",{className:(0,h.default)("fbc_tip_input",{error:r})},f))}return null},render:function(){var t=this.props,n=t.data,i=t.style,a=n.type,o=this.getComponentLayoutStyleInfo(),l=this.getOptionsLayoutType();return s.default.createElement("div",{className:(0,h.default)("fb_component",(0,E.getComponentType)(n)),id:n.id,style:i},s.default.createElement("div",{className:"fb_componentText",style:o?o.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),s.default.createElement("div",{className:"fb_componentBody",style:o?o.bodyStyle:null},s.default.createElement("div",{className:(0,h.default)("fbc_content","fbc_options_content","fbc_options_layout_"+l),style:{marginTop:o?0:null}},s.default.createElement("ul",{role:a+"group",tabIndex:0,"aria-labelledby":this.ariaLabelTriggerOrder()},this.renderOptions(l)),s.default.createElement("div",{className:"clearB"})),s.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=x},209:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var n=0,i=Array(t.length);n<t.length;n++)i[n]=t[n];return i}return Array.from(t)}function l(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=function(){function t(t,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(n,i,a){return i&&t(n.prototype,i),a&&t(n,a),n}}(),u=i(6),d=a(u),c=i(19),h=a(c),p=i(22),f=a(p),m=i(17),g=i(8),v=i(210),y=a(v),b=i(157),I=a(b),S=i(216),_=i(23),E=a(_),C=i(38),T=i(55),x='15px/1 Helvetica,"Nimbus Sans L",-apple-system,BlinkMacSystemFont',O=function(){function t(n){var i=this;l(this,t),this.opt=[],this.lv0=[],this.maxDepth=1,this.memoLevel={},d.default.forEach(n,function(t,n){var a=d.default.assign({},t);null===t.pId&&(a.depth=0,i.lv0.push(a)),i.opt.push(a)}),this.setDepth()}return s(t,[{key:"setDepth",value:function(){var t=this,n=function n(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null!=i.depth)return i.depth+a;if(null===i.pId)return a;var o=t.getOption(i.pId);return n(o,a+1)};d.default.forEach(this.opt,function(i){if(null==i.depth&&(i.depth=n(i)),i.size=(0,g.getTextWidth)(i.content,x),i.pId){var a=t.getOption(i.pId);a.hasNext=!0}i.depth+1>t.maxDepth&&(t.maxDepth=i.depth+1)})}},{key:"getChildren",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.memoLevel[t]||(this.memoLevel[t]=d.default.filter(this.opt,function(n){return n.pId===t})),this.memoLevel[t]}},{key:"getMaxWidth",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Math.ceil(Math.max.apply(Math,o(d.default.map(this.getChildren(t),function(t){return t.size}))))}},{key:"getOption",value:function(t){return d.default.find(this.opt,{id:t})}}]),t}(),N=h.default.createClass({displayName:"MultiDropDown",mixins:[E.default],getInitialState:function(){return this.theme=(0,m.getThemeHelper)(),{}},handleSelectOption:function(e,t){var n=this.props,i=n.onChange,a=n.level,o=n.options;i&&i(e,a,d.default.find(o,{sId:t}))},handleResetOption:function(e){var t=this.props,n=t.onChange,i=t.level;n&&n(e,i,null)},getOptions:function(t){return this._getOptions||(this._getOptions=(0,g.memo)(function(t){var n=[],i=[];return d.default.forEach(t,function(t){var a={id:t.sId,_id:t.id,sId:t.sId,value:t.content,remaining:1/0};2===t.type?n.push(a):i.push(a)}),i.concat(n)})),this._getOptions(t)},renderContent:function(t){var n=this.props.loading,i=t.text,a=t.placeholder,o=t.iconStyle;return[h.default.createElement("span",{key:"content-text",className:"fbc_selectRes"},i||a),n?h.default.createElement("span",{key:"loading",className:"fbc_selectArrow",style:o},h.default.createElement("span",{className:"fbc_select-drop-loading"})):h.default.createElement("span",{key:"arrow",className:"iconfont fbc_selectArrow",style:o},String.fromCharCode(58983))]},renderOption:function(t){var n=this.props.value,i=n===t.id,a={active:i,tipsStyle:this.theme.getComponentTipsStyle()};return h.default.createElement(S.DropDownOption,r({key:t.sId},t,a))},render:function(){var t=this.props,n=t.value,i=t.placeholder,a=t.inValid,o=t.options,l=t.style,r=t.deviceInfo,s={default:this.theme.getInputBoxStyle(this.theme.NORMAL),active:this.theme.getInputBoxStyle(this.theme.ACTIVE)},u=this.getOptions(o);return l&&(s=(0,g.styleInject)(s,l)),h.default.createElement(y.default,{className:(0,f.default)("fbc_select","fbc_multiItem",{hasValue:n,error:a}),optionsClassName:(0,f.default)("fbc_options"),deviceInfo:r,placeholder:i||(0,m.getLang)().cSelectorPlaceholder,value:n,options:u,reset:!0,style:s,triggerStyle:this.theme.getInputBoxTriggerStyle(),iconStyle:{default:this.theme.getDropDownTriggerIconStyle(this.theme.NORMAL),active:this.theme.getDropDownTriggerIconStyle(this.theme.ACTIVE)},resetIconStyle:{default:this.theme.getDropDownResetIconStyle(this.theme.NORMAL),hover:this.theme.getDropDownResetIconStyle(this.theme.HOVER),active:this.theme.getDropDownResetIconStyle(this.theme.ACTIVE)},optionStyle:this.theme.getDropDownOptionStyle(),onRenderContent:this.renderContent,onRenderOption:this.renderOption,onReset:this.handleResetOption,onChange:this.handleSelectOption})}}),L=h.default.createClass({displayName:"MultiLevelPicker",mixins:[E.default],getDefaultProps:function(){return{nodeList:null}},getInitialState:function(){return this.theme=(0,m.getThemeHelper)(),this.queue=Promise.resolve(!0),this._placeholderWidthCache={},{}},componentDidMount:function(){this.mounted=!0},componentWillUpdate:function(t){},componentWillUnmount:function(){this._placeholderWidthCache=null,this.mounted=!1},getPlaceholderByPid:function(t){var n=this.props,i=n.placeholder,a=n.fill,o=(0,m.getLang)(),l=a?a.current:null,r=l?d.default.find(l,{id:t}):null,s=i||{},u=r&&3===r.type?o.cFillingPlaceholder:o.cSelectorPlaceholder,c=s[t];return c||u},getPlaceholderWidth:function(t){return this._placeholderWidthCache[t]||(this._placeholderWidthCache[t]=Math.ceil((0,g.getTextWidth)(t,x))),this._placeholderWidthCache[t]},handleChangeSelect:function(e,t,n){var i=this.props.onChange;i&&i(e,{lvl:t,opt:n})},handleChangeInput:function(e,t,n){var i=this.props.onChange;i&&i(e,{node:t,value:n})},renderSelect:function(t,n,i){var a=this.props,o=a.isMobile,l=a.inValid,r=a.deviceInfo,s=a.fill,u=s?s.current:null,d=u?u[t]:null,c=u&&u[t-1]?u[t-1].id:-1,p=null,f=s?s.value:null;d&&(p=d.sId);var m=[];if(n&&1===n.length&&3===n[0].type)m.push(h.default.createElement(S.AfterInput,{key:"input"+t,className:"fbc_multiItem",deviceInfo:r,placeholder:n[0].content,inputInValid:l,value:f,id:n[0].sId,onChange:this.handleChangeInput}));else{var g=this.getPlaceholderByPid(c),v=this.getPlaceholderWidth(g);m.push(h.default.createElement(N,{options:n,level:t,key:"levelSelect"+t,deviceInfo:r,style:o?null:{width:Math.max(i,v)+74},value:p,placeholder:g,inValid:l,onChange:this.handleChangeSelect})),d&&2===d.type&&m.push(h.default.createElement(S.AfterInput,{key:"other"+t,className:"fbc_multiItem",deviceInfo:r,inputInValid:l,value:f,id:d.sId,placeholder:null,onChange:this.handleChangeInput}))}return m},renderLevelSelect:function(){var t=[],n=this.props,i=n.fill,a=n.levelOptions,o=i?i.current:null,l=a.lv0;if(t=t.concat(this.renderSelect(0,l,a.getMaxWidth(null))),o)for(var r=0;o[r];){var s=o[r],u=a.getChildren(s.id);u.length>0&&(t=t.concat(this.renderSelect(r+1,u,a.getMaxWidth(s.id)))),r++}return t},render:function(){return h.default.createElement("div",{className:"fbc_multiLevelPicker clear"},this.renderLevelSelect())}}),M=h.default.createClass({displayName:"MultiLevel",mixins:[I.default,E.default],getInitialState:function(){return this.theme=(0,m.getThemeHelper)(),this.store=(0,m.getStore)(),this.getLevelOptions=(0,g.memo)(this._getLevelOptions),{}},_getLevelOptions:function(t){return new O(t)},handleChange:function(e,t){var n=this.props.data;this.store.dispatch((0,C.SET_MULTILEVEL_VALUE)({id:n.id,data:t}))},handleBlur:function(e,t){var n=this.props,i=n.fill;n.data;i&&!i.select&&t&&t.length>0},renderTips:function(t){return null},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,l=t.layout,r=this.getComponentLayoutStyleInfo(),s=o&&o.length>0,u=(0,m.getDeviceInfo)(),d=this.getLevelOptions(n.options);return h.default.createElement("div",{className:(0,f.default)("fb_component",(0,T.getComponentType)(n)),id:n.id,style:i},h.default.createElement("div",{className:"fb_componentText",style:r?r.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),h.default.createElement("div",{className:"fb_componentBody",style:r?r.bodyStyle:null},h.default.createElement("div",{className:(0,f.default)("fbc_content_withoutGap"),style:{width:(this.isMobile()||l.isSqueeze?100:10*(n.cpWidth||8))+"%",marginTop:r?-(0,m.getStaticData)("CP_ITEM_GAP"):null}},h.default.createElement(L,{fill:a,placeholder:n.defaultTips,inValid:s,levelOptions:d,isMobile:this.isMobile(),deviceInfo:u,onChange:this.handleChange,onBlur:this.handleBlur}))),h.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":"."}))}});n.default=M,t.exports=n["default"]},210:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function l(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Options=n.Option=void 0;var s=function(){function t(t,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(n,i,a){return i&&t(n.prototype,i),a&&t(n,a),n}}(),u=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},d=i(6),c=a(d),h=i(22),p=a(h),f=i(19),m=a(f),g=i(20),v=a(g),y=i(211),b=(a(y),i(215)),I=a(b),S=i(23),_=a(S),E=i(36),C=function(t){return t?window.getComputedStyle(t,null):null},T=function(t,n){var i=t.getPropertyValue(n);return"none"!==i&&i?i:null},x=n.Option=m.default.createClass({displayName:"Option",mixins:[_.default],handleMouseEnter:function(){var t=this.props,n=t.id,i=t.onChangeCurrent;i&&i(n)},handleClick:function(e){var t=this.props,n=t.id,i=t.onChange;i&&i(e,n)},render:function(){var t=this.props,n=t.prefix,i=t.value,a=t.selected,o=t.current,l=t.role,r=t.ariaCurrentId;return m.default.createElement("li",{className:(0,p.default)(n+"-option",{"selected":a,"current":o}),role:l,"aria-current":o,id:o?r:null,onClick:this.handleClick,onMouseEnter:this.handleMouseEnter},i||" ")}}),O=n.Options=m.default.createClass({displayName:"Options",mixins:[_.default],getInitialState:function(){var t=null,n=this.props;if(n.selected){var i=[].concat(n.selected||[]);c.default.forEach(n.options,function(n){if(i.indexOf(n.id)>-1)return t=n.id,!1})}else t=n.options[0]?n.options[0].id:null;return{currentId:t,style:{}}},componentDidMount:function(){var t=this.props,n=t.autoWidth,i=t.popover,a=t.sizeFixer;if(n){var o=i.getTriggerNode(),l=C(o);this.setState({style:{width:o.clientWidth+((T(l,"border-right")>>>0)+(T(l,"border-left")>>>0)+(T(l,"padding-right")>>>0)+(T(l,"padding-left")>>>0)+a)+"px"}})}this.scrollToCurrent()},componentWillUnmount:function(){clearTimeout(this.scrollToCurrentTimer)},scrollToCurrent:function(){var t=this;this.scrollToCurrentTimer=setTimeout(function(){var n=v.default.findDOMNode(t.options);if(n){var i=n.getElementsByClassName("current")[0],a=n.clientHeight;i&&i.offsetTop>=t.options.scrollTop+a&&(t.options.scrollTop=i.offsetTop+100-a)}},300)},updateCurrentId:function(t){this.setState({currentId:t})},hoverNext:function(){var t=this.state.currentId,n=v.default.findDOMNode(this.options);if(n){var i=n.getElementsByClassName("current")[0],a=n.clientHeight,o=-1;t&&(o=this.optionIds.indexOf(t)),this.optionIds[o+1]?(t=this.optionIds[o+1],i&&i.offsetTop+50>=this.options.scrollTop+a&&(this.options.scrollTop=i.offsetTop+100-a)):(t=this.optionIds[0],this.options.scrollTop=0),this.updateCurrentId(t)}},hoverPrev:function(){var t=this.state.currentId,n=v.default.findDOMNode(this.options);if(n){var i=n.getElementsByClassName("current")[0],a=this.optionIds.indexOf(t);a>0?(t=this.optionIds[a-1],i&&i.offsetTop<=this.options.scrollTop&&(this.options.scrollTop=i.offsetTop-50)):(t=this.optionIds[this.optionIds.length-1],this.options.scrollTop=this.options.scrollHeight),this.updateCurrentId(t)}},select:function(e){null!=this.state.currentId&&this.props.onOptionChange&&this.props.onOptionChange(e,this.state.currentId)},handleMouseDown:function(e){e.preventDefault()},refOptions:function(t){this.options=t},renderOptions:function(){var t=this,n=this.props,i=n.prefix,a=n.onRenderOption,o=n.onOptionChange,l=n.currentId,r=n.options,s=n.selected,d=this.state.currentId;return this.optionIds=c.default.map(c.default.filter(r,function(t){return!t.disabled}),function(t){return t.id}),c.default.map(r,function(n){var r=n.id,c=(s||[]).indexOf(r)>-1,h=r===d;return a?a(u({prefix:i},n,{selected:c,current:h,onChangeCurrent:t.updateCurrentId,onChange:o,role:"option",ariaCurrentId:l})):m.default.createElement(x,u({key:r,prefix:i},n,{selected:c,current:h,ariaCurrentId:l,role:"option",onChange:o,onChangeCurrent:t.updateCurrentId}))})},render:function(){var t=this.props,n=t.id,i=t.prefix,a=t.optionsClassName,o=t.options,l=t.style,r=t.notFoundContent,s=(t.selected,this.state.style),u=this.state.currentId;if(!o||0===o.length)return r?m.default.createElement("ul",{ref:this.refOptions,className:(0,p.default)(i+"-options",a),role:"listbox","aria-expanded":!0,"aria-label":r,style:c.default.assign({},s,l),onMouseDown:this.handleMouseDown},m.default.createElement("li",{key:"notfound",className:(0,p.default)(i+"-option","notfound"),role:"option"},r)):null;var d="",h=c.default.find(o,{id:u});return h&&(d=h.value),m.default.createElement("ul",{ref:this.refOptions,className:(0,p.default)(i+"-options",a),id:n,"aria-live":"assertive",role:"listbox","aria-label":d,tabIndex:-1,"aria-expanded":"true",style:c.default.assign({},s,l),onMouseDown:this.handleMouseDown},this.renderOptions())}}),N={KEY_TAB:9,KEY_ENTER:13,KEY_SPACE:32,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DEL:46},L=function(){function t(){r(this,t),this._idList=[]}return s(t,[{key:"genId",value:function(){var t=void 0;do t="dpd-"+(+new Date).toString(36)+"-"+Math.round(100*Math.random());while(this._idList.indexOf(t)>-1);return t}},{key:"register",value:function(){var t=this.genId();return this._idList.push(t),t}},{key:"unregister",value:function(t){var n=this._idList.indexOf(t);return n>-1&&(this._idList=this._idList.slice(),this._idList.splice(n,1),!0)}}]),t}(),M=new L,R=m.default.createClass({displayName:"DropDown",mixins:[_.default],getDefaultProps:function(){return{prefix:"mg",disabled:!1,open:!1,placeholder:"Please select",defaultValue:null,value:null,options:[],focus:!0,autoWidth:!0,cushion:-1,onRenderOption:null,reset:!1,onReset:c.default.noop,onChange:c.default.noop,onClick:c.default.noop}},getInitialState:function(){var t=[],n=this.props;return n.value?t=t.concat(n.value):n.defaultValue&&(t=t.concat(n.defaultValue)),t=this.filterSelected(n,t),this.displayBottom=!0,this.dropdownId=M.register(),{selected:t,open:n.open}},componentWillReceiveProps:function(t){if((void 0!==t.value||void 0!==this.props.value)&&t.value!==this.props.value){var n=this.filterSelected(t,t.value);this.setState({selected:n})}},componentWillUnmount:function(){this.dropdownId&&M.unregister(this.dropdownId)},filterSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments[1];n=[].concat(n);var i=c.default.filter(c.default.uniq(n),function(t){return null!==t&&void 0!==t}).sort();return!t.multiple&&i.length>1&&(i=[i[0]]),i},open:function(){this.setState({open:!0})},close:function(){this.setState({open:!1})},handlePopoverVisibleChange:function(t){t?this.props.onClick(t):this.setState({optionsReady:!1}),this.setState({open:t})},handleOptionReady:function(){this.setState({optionsReady:!0})},handleKeyDown:function(e){var t=this.state.open,n=e.keyCode;switch(n){case N.KEY_ESC:this.close();break;case N.KEY_DOWN:if(!t){this.open();break}e.preventDefault(),this.options.hoverNext(e);break;case N.KEY_UP:if(!t){this.open();break}e.preventDefault(),this.options.hoverPrev(e);break;case N.KEY_ENTER:case N.KEY_SPACE:if(!t){this.open();break}e.preventDefault(),this.options.select(e);break;case N.KEY_TAB:this.close();break;case N.KEY_DEL:this.handleReset(e)}},handleReset:function(e){e.stopPropagation(),e.preventDefault();var t=this.props.onReset;t(e,null),this.setState({selected:null})},handleOptionChange:function(e,t){var n=this.state.selected,i=this.props,a=i.multiple,o=i.options,l=i.onChange;if(a){var r=(n||[]).indexOf(t);n=(n||[]).slice(),r>-1?n.splice(r,1):n.push(t)}else n=[t],this.close();l(e,t,c.default.map(n,function(t){return c.default.find(o,{id:t})})),this.setState({selected:n})},handlePositionUpdated:function(t){"position-bottom-left"===t.position.name&&(this.displayBottom=!0),"position-top-left"===t.position.name&&(this.displayBottom=!1)},refPopover:function(t){this.popover=t},refOptions:function(t){this.options=t},getStyle:function(t){var n=this.state.open,i=this.props.disabled;if(t&&t.default){var a=t.default;return i&&t.disabled?a=c.default.assign({},a,t.disabled):(t.focus||t.active)&&n&&(a=c.default.assign({},a,t.active,t.focus)),a}return t},getTrueOptionStyle:function(t){var n=c.default.assign({},t),i=n.borderTopColor||n.borderColor,a=n.borderBottomColor||n.borderColor;return this.displayBottom?(n.borderTopColor=i,n.borderBottomColor=a):(n.borderTopColor=a,n.borderBottomColor=i),n},getText:function(){var t=this.props.options,n=this.filterSelected(this.props,this.state.selected),i=[];return c.default.forEach(n,function(n){var a=c.default.find(t,{id:n});a&&i.push(a.value)}),c.default.trim(i.join("; "))},render:function(){var t,n=this.props,i=n.prefix,a=n.placeholder,r=n.className,s=n.disabled,d=n.onClick,c=n.focus,h=n.onFocus,f=n.onBlur,g=n.cushion,v=n.reset,b=n.style,S=n.triggerStyle,_=n.iconStyle,C=n.resetIconStyle,T=n.optionStyle,x=n.deviceInfo,N=n.onRenderContent,L=l(n,["prefix","placeholder","className","disabled","onClick","focus","onFocus","onBlur","cushion","reset","style","triggerStyle","iconStyle","resetIconStyle","optionStyle","deviceInfo","onRenderContent"]),M=this.state,R=M.selected,w=M.open,P="bb-drop",B=this.dropdownId+"-options",D=this.dropdownId+"-opt-current";return m.default.createElement(y.Popover,{ref:this.refPopover,position:x.isMobile?y.Position.FixBottom:y.Position.Auto,visible:!s&&w,cushion:g,style:this.getStyle(b),className:(0,p.default)(x.isMobile?"fixed-content":"drop-content","dropdown-option",i+"-select-content",x.isMobile?"drop-mobile":null),wrapperClassName:(0,p.default)(i+"-select",r,(t={},o(t,P+"focus",w&&!s),o(t,P+"disabled",s),t)),onVisibleChange:this.handlePopoverVisibleChange,onPositionUpdated:this.handlePositionUpdated,onPositionReady:this.handleOptionReady},m.default.createElement(I.default,{prefix:i,className:(0,p.default)({"has-reset":v}),disabled:s,focus:c,"aria-disabled":s,"aria-expanded":w&&!s,"aria-haspopup":"listbox","aria-controls":B,"aria-activedescendant":D,"aria-labelledby":L["aria-labelledby"],placeholder:a,text:this.getText(),id:this.filterSelected(this.props,this.state.selected),style:this.getStyle(S),iconStyle:this.getStyle(_),onRenderContent:N,onClick:d,onFocus:h,onBlur:f,onKeyDown:this.handleKeyDown},v&&R&&R.length>0?m.default.createElement(E.BaseBtn,{className:"iconfont "+i+"-reset fbc-select-reset",style:C,onClick:this.handleReset},String.fromCharCode(58982)):null),m.default.createElement(y.Content,null,m.default.createElement(O,u({ref:this.refOptions,prefix:i,selected:R,popover:this.popover},L,{onOptionChange:this.handleOptionChange,sizeFixer:0,id:B,currentId:D,style:this.getTrueOptionStyle(this.getStyle(T))}))))}});n.default=R},211:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(29),l=a(o),r=i(212),s=a(r),u=i(214),d=i(213),c=i(30),h=i(32),p=a(h);n.default={Popover:l.default,Position:{Auto:s.default,FixTop:u.position_fix_top,FixBottom:u.position_fix_bottom,TopLeft:d.position_top_left,TopRight:d.position_top_right,BottomLeft:d.position_bottom_left,BottomRight:d.position_bottom_right},ClickTrigger:c.Click,Content:p.default},t.exports=n["default"]},212:function(t,n,i){"use strict";function a(t,n,i,a){var l=(0,o.getWindowSize)(),r=a.anchorBoundingBoxViewport,u=a.cushion,d=void 0,c=void 0;d=r.left+i.width>l.width&&r.right-i.width>0?"Right":"Left",c=r.bottom+u+i.height>l.height&&r.top-u-i.height>0?"Top":"Bottom";var h=""+c+d;return s[h].locate(t,n,i,a)}Object.defineProperty(n,"__esModule",{value:!0});var o=i(9),l=i(34),r=i(213),s={BottomLeft:r.position_bottom_left,BottomRight:r.position_bottom_right,TopLeft:r.position_top_left,TopRight:r.position_top_right},u=(0,l.createPlacement)(a);n.default=u,t.exports=n["default"]},213:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.position_bottom_right=n.position_bottom_left=n.position_top_right=n.position_top_left=void 0;var a=i(34),o=200,l=function(t,n,i,a){var l=t.left,r=t.top,s=l,u=r-i.height-a.cushion;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(s)+"px",top:Math.round(u)+"px",zIndex:o,opacity:1}},name:"position-top-left"}},r=function(t,n,i,a){var l=t.right,r=t.top,s=l-i.width,u=r-i.height-a.cushion;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(s)+"px",top:Math.round(u)+"px",zIndex:o,opacity:1}},name:"position-top-right"}},s=function(t,n,i,a){var l=t.left,r=t.bottom,s=l,u=r+a.cushion;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(s)+"px",top:Math.round(u)+"px",zIndex:o,opacity:1}},name:"position-bottom-left"}},u=function(t,n,i,a){var l=t.right,r=t.bottom,s=l-i.width,u=r+a.cushion;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(s)+"px",top:Math.round(u)+"px",zIndex:o,opacity:1}},name:"position-bottom-right"}};n.position_top_left=(0,a.createPlacement)(l),n.position_top_right=(0,a.createPlacement)(r),n.position_bottom_left=(0,a.createPlacement)(s),n.position_bottom_right=(0,a.createPlacement)(u)},214:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.position_fix_bottom=n.position_fix_top=void 0;var a=i(34),o=200,l=function(t,n,i,a){return{getCSSStyle:function(){return{position:"fixed",left:0,right:0,top:0,bottom:"unset",zIndex:o,opacity:1}},name:"fixed-top"}},r=navigator.userAgent.toLowerCase(),s=document.documentElement.clientHeight;window.addEventListener("orientationchange",function(){s=document.documentElement.clientHeight});var u=function(t,n,i,a){return{getCSSStyle:function(){return/android/.test(r)?{position:"fixed",left:0,right:0,top:Math.ceil(s-i.height)+"px",bottom:"unset",zIndex:o,opacity:1}:{position:"fixed",left:0,right:0,top:"unset",bottom:0,zIndex:o,opacity:1}},name:"fixed-bottom"}};n.position_fix_top=(0,a.createPlacement)(l),n.position_fix_bottom=(0,a.createPlacement)(u)},215:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}function l(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function s(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var u=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},d=function(){function t(t,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(n,i,a){return i&&t(n.prototype,i),a&&t(n,a),n}}(),c=i(22),h=a(c),p=i(19),f=a(p),m=i(211),g=(a(m),function(t){function n(){var t,i,a,o;l(this,n);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=a=r(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(u))),a.handleMouseDown=function(e){e.preventDefault()},a.handleClick=function(e){var t=a.props,n=t.onClick,i=t.close,o=t.open,l=t.contentVisible,r=t.disabled;e.preventDefault(),l?i():r||(o(),a.focused=!0,setTimeout(function(){a.triggerField&&a.triggerField.focus()},150),n&&n(e))},a.handleFocus=function(e){var t=a.props,n=t.focus,i=t.onFocus,o=t.open,l=t.contentVisible,r=t.disabled;n&&(l||r||a.focused||(o(),i&&i(e)))},a.handleBlur=function(e){var t=a.props,n=t.focus,i=t.onBlur;t.close,t.contentVisible;n&&(e.preventDefault(),i&&i())},a.refTrigger=function(t){a.props.onTriggerRefChange&&a.props.onTriggerRefChange(t),a.triggerField=t},a.renderContent=function(){var t=a.props,n=t.text,i=t.placeholder,o=t.onRenderContent,l=t.iconStyle;return o?o(a.props):[f.default.createElement("span",{key:"content"},n||i),f.default.createElement("span",{key:"arrow",className:"iconfont fbc_selectArrow",style:l},String.fromCharCode(58983))]},o=i,r(a,o)}return s(n,t),d(n,[{key:"render",value:function(){var t=this.props,n=t.prefix,i=t.text,a=t.className,l=t.children,r=t.onKeyDown,s=t.onKeyPress,d=t.style,c=o(t,["prefix","text","className","children","onKeyDown","onKeyPress","style"]),p={};for(var m in c)c.hasOwnProperty(m)&&m.indexOf("aria-")>-1&&(p[m]=c[m]);return f.default.createElement("div",u({ref:this.refTrigger,className:(0,h.default)(n+"-dropTrigger",i?"selected":"placeholder",a),tabIndex:0,onMouseDown:this.handleMouseDown},p,{role:"combobox",onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:r,onKeyPress:s,style:d}),this.renderContent(),l)}}]),n}(m.ClickTrigger));n.default=g,t.exports=n["default"]},216:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.AfterInput=n.DropDownOption=void 0;var o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},l=i(19),r=a(l),s=i(6),u=a(s),d=i(22),c=a(d),h=i(157),p=a(h),f=i(23),m=a(f),g=i(210),v=a(g),y=i(17),b=i(36),I=i(55),S=i(38),_=i(53),E=a(_),C=i(8),T=r.default.createClass({displayName:"DropDownOption",mixins:[m.default],handleMouseEnter:function(){var t=this.props,n=t.id,i=t.onChangeCurrent,a=t.remaining;0!==a&&i&&i(n)},handleClick:function(e){var t=this.props,n=t.id,i=t.onChange,a=t.remaining;0!==a&&i&&i(e,n)},renderLimit:function(t){var n=this.props,i=n.showLimit,a=n.tipsStyle;if(null!=t&&isFinite(t)){var o="";return i&&t>0?o=(0,y.getLang)().cQuotaRemainingFunc({remaining:t}):t<=0&&(o=(0,y.getLang)().cQuotaRemainingFull),r.default.createElement("span",{className:"fbc_optionTips",style:a},o)}return null},render:function(){var t=this.props,n=t.value,i=t.current,a=t.active,o=t.hideNoQuota,l=t.onRenderOptionNum,s=t.remaining,u=t.role,d=t.ariaCurrentId;if(o&&s<=0)return null;var h=l?l():null,p=s<=0&&!a;return r.default.createElement(b.BaseBtn,{component:"li",className:(0,c.default)("fbc_selectLi",{"fbc_select_current":i,"fbc_select_selected":a,"fbc_select_disabled":p}),disabled:p,role:u,"aria-current":i,id:i?d:null,onClick:this.handleClick,onMouseEnter:this.handleMouseEnter},h,n,this.renderLimit(s))}}),x=r.default.createClass({displayName:"AfterInput",mixins:[m.default],getInitialState:function(){return this.theme=(0,y.getThemeHelper)(),{}},handleStopPropagation:function(e){e.stopPropagation()},handleTextBoxChange:function(e){var t=this.props.id;this.props.onChange&&this.props.onChange(e,t,e.target.value)},render:function(){var t=this.props,n=t.className,i=t.deviceInfo,a=t.style,o=t.placeholder,l=t.value,s=t.isRequired,u=t.inputInValid;return r.default.createElement("div",{className:(0,c.default)("fbc_dropDownInputWrapper",n),style:a},r.default.createElement(E.default,{className:(0,c.default)("fbc_input","fbc_optionInput",{"error":u}),deviceInfo:i,tabIndex:0,value:l,placeholder:o||(0,y.getLang)().cFillingPlaceholder,style:this.theme.getInputBoxStyle(),inputStyle:this.theme.getInputBoxExtraStyle(),onTouchStart:this.handleStopPropagation,onMouseDown:this.handleStopPropagation,onKeyDown:this.handleStopPropagation,onClick:this.handleStopPropagation,onChange:this.handleTextBoxChange},s?r.default.createElement("span",{className:"fbc_required",style:this.theme.getInputBoxExtraStyle()},"*"):null),r.default.createElement("div",{className:"clearB"}))}}),O=r.default.createClass({displayName:"DropDown",mixins:[p.default,m.default],getInitialState:function(){return this.theme=(0,y.getThemeHelper)(),this.store=(0,y.getStore)(),{}},hasValue:function(t){var n=this.props.fill,i=!1;return u.default.forEach(n||[],function(n){if(t===n||u.default.isPlainObject(n)&&n.id===t)return i=!0,!1}),i},getFillId:function(){var t=this.props.fill,n=u.default.filter(u.default.map(t,function(t){return t?u.default.isPlainObject(t)?t.id:t:null}));return u.default.isEmpty(n)?null:n},getFillInfo:function(){var t=this,n=this.props.fill,i=null;return u.default.forEach(n||[],function(n){var a=void 0,o=void 0;if(n)return u.default.isPlainObject(n)?(a=n.id,o=n.value):(a=n,o=null),i={id:a,value:o,opt:u.default.find(t.options(),{sId:a})},!1}),i},handleSelectOption:function(e,t){var n=this.props,i=n.data,a=n.fill;a&&a.indexOf(t)>-1||this.store.dispatch((0,S.SELECT_OPT)({id:i.id,value:t}))},handleResetOption:function(){var t=this.props.data;this.store.dispatch((0,S.SELECT_OPT)({id:t.id,value:null}))},handleStopPropagation:function(e){e.stopPropagation()},handleSetOptionInputValue:function(e,t,n){var i=this.props.data;this.store.dispatch((0,S.SET_OPT_EXT_VALUE)({id:i.id,data:{optId:t,value:n}}))},options:function(){var t=this.props.data;return this.memoOptions||(this.memoOptions=(0,C.memo)(this._options)),this.memoOptions(t)},_options:function(t){var n=[],i=null;if(t.isLimitOptions&&t.optionsQuotaInfo&&(i=t.optionsQuotaInfo),u.default.forEach(t.options,function(t){var a=i&&i[t.sId]?i[t.sId]:null,o=1/0;if(a){var l=(0,C.quotaCalculate)(a);o=l.remaining}n.push({sId:t.sId,id:t.sId,_id:t.id,value:t.value,remaining:o,disabled:o<=0})}),t.isAddOtherOption){var a=i&&i[t.otherId]?i[t.otherId]:null,o=1/0;if(a){var l=(0,C.quotaCalculate)(a);o=l.remaining}n.push({sId:t.otherId,id:t.otherId,_id:-1,value:t.otherOptionTitle||(0,y.getLang)().cOptionOtherDefault,afterInput:!0,isRequired:t.otherOptionIsRequired,remaining:o,disabled:o<=0})}return n;
},renderOption:function(t){var n=this.props.data,i=this.hasValue(t.sId),a={showLimit:n.isShowOptionLimit,hideNoQuota:n.isHideFullOption,active:i,tipsStyle:this.theme.getComponentTipsStyle()};return r.default.createElement(T,o({},t,{key:t.sId},a))},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,l=t.layout,s=(0,y.getDeviceInfo)();this.optionNum=0;var u=this.getComponentLayoutStyleInfo(),d=o&&o.length>0,h=this.options(),p=this.getFillInfo(),f=p&&p.opt.afterInput,m=this.hasError("inputRequired");return r.default.createElement("div",{className:(0,c.default)("fb_component",(0,I.getComponentType)(n)),id:n.id,style:i},r.default.createElement("div",{className:"fb_componentText",style:u?u.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderError(this.theme.getComponentErrorStyle())),r.default.createElement("div",{className:"fb_componentBody",style:u?u.bodyStyle:null},r.default.createElement("div",{className:(0,c.default)("fbc_content","fbc_widthCp",{"has-input":f}),style:{width:(this.isMobile()||l.isSqueeze?100:10*(n.cpWidth||8))+"%",marginTop:u?0:null}},r.default.createElement(v.default,{className:(0,c.default)("fbc_select",{hasValue:a&&a.length>0,error:d}),optionsClassName:(0,c.default)("fbc_options"),deviceInfo:s,placeholder:n.defaultTips,value:this.getFillId(),options:h,reset:!0,style:{default:this.theme.getInputBoxStyle(this.theme.NORMAL),active:this.theme.getInputBoxStyle(this.theme.ACTIVE)},triggerStyle:this.theme.getInputBoxTriggerStyle(),iconStyle:{default:this.theme.getDropDownTriggerIconStyle(this.theme.NORMAL),active:this.theme.getDropDownTriggerIconStyle(this.theme.ACTIVE)},resetIconStyle:{default:this.theme.getDropDownResetIconStyle(this.theme.NORMAL),hover:this.theme.getDropDownResetIconStyle(this.theme.HOVER),active:this.theme.getDropDownResetIconStyle(this.theme.ACTIVE)},optionStyle:this.theme.getDropDownOptionStyle(),onRenderOption:this.renderOption,onReset:this.handleResetOption,onChange:this.handleSelectOption}),f?r.default.createElement(x,{value:p.value,id:p.id,inputInValid:m&&m.info.indexOf(p.id)>-1,deviceInfo:s,isRequired:p.opt.isRequired,onChange:this.handleSetOptionInputValue}):null),r.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=O,n.DropDownOption=T,n.AfterInput=x},238:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),l=a(o),r=i(23),s=a(r),u=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},d=function(t,n){return t.x*n.x+t.y*n.y},c=function(t,n){var i=u(t)*u(n);if(0===i)return 0;var a=d(t,n)/i;return a>1&&(a=1),Math.acos(a)},h=function(t,n){return t.x*n.y-n.x*t.y},p=function(t,n){var i=c(t,n);return h(t,n)>0&&(i*=-1),180*i/Math.PI},f=l.default.createClass({displayName:"BaseFinger",mixins:[s.default],getInitialState:function(){return this.preTapPosition={x:null,y:null},this.preV={x:0,y:0},{}},_emitEvent:function(t){if(this.props[t]){for(var n,i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];(n=this.props)[t].apply(n,a)}},_cancelLongTap:function(){clearTimeout(this.longTapTimeout)},_cancelSingleTap:function(){clearTimeout(this.singleTapTimeout)},_swipeDirection:function(t,n,i,a){return Math.abs(t-n)>80||this.end-this.now<250?Math.abs(t-n)>=Math.abs(i-a)?t-n>0?"LEFT":"RIGHT":i-a>0?"UP":"DOWN":"NO_CHANGE"},handleTouchStart:function(e){var t=this;if(this._emitEvent("onTouchStart",e),e.touches){this.now=+new Date,this.x1=e.touches[0].pageX,this.y1=e.touches[0].pageY,this.delta=this.now-(this.last||this.now),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var n=this.preV,i=e.touches.length;if(i>1){this._cancelLongTap(),this._cancelSingleTap();var a={x:e.touches[1].pageX-this.x1,y:e.touches[1].pageY-this.y1};n.x=a.x,n.y=a.y,this.pinchStartLen=u(n),this._emitEvent("onMultipointStart",e)}else this.isSingleTap=!0;this.longTapTimeout=setTimeout(function(){t._emitEvent("onLongTap",e),t.afterLongTap=!0,t.afterLongTapTimeout=setTimeout(function(){t.afterLongTap=!1},1e3)},750)}},handleTouchMove:function(e){this._emitEvent("onTouchMove",e);var t=this.preV,n=e.touches.length,i=e.touches[0].pageX,a=e.touches[0].pageY;if(this.isSingleTap=!1,this.isDoubleTap=!1,n>1){var o={x:e.touches[1].pageX-i,y:e.touches[1].pageY-a};null!==t.x&&(this.pinchStartLen>0&&(e.center={x:(e.touches[1].pageX+i)/2,y:(e.touches[1].pageY+a)/2},e.scale=e.zoom=u(o)/this.pinchStartLen,this._emitEvent("onPinch",e)),e.angle=p(o,t),this._emitEvent("onRotate",e)),t.x=o.x,t.y=o.y,this.multiTouch=!0}else null!==this.x2?(e.deltaX=i-this.x2,e.deltaY=a-this.y2):(e.deltaX=0,e.deltaY=0),this._emitEvent("onPressMove",e);this._cancelLongTap(),this.x2=i,this.y2=a,n>1&&e.preventDefault()},handleTouchCancel:function(e){this._emitEvent("onTouchCancel",e),clearInterval(this.singleTapTimeout),clearInterval(this.tapTimeout),clearInterval(this.longTapTimeout),clearInterval(this.swipeTimeout)},handleTouchEnd:function(e){var t=this;this._emitEvent("onTouchEnd",e),this.end=+new Date,this._cancelLongTap(),this.multiTouch===!0&&e.touches.length<2&&this._emitEvent("onMultipointEnd",e),e.origin=[this.x1,this.y1],this.multiTouch===!1&&(this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(e.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),e.distance=Math.abs(this.x1-this.x2),this.swipeTimeout=setTimeout(function(){t._emitEvent("onSwipe",e)},0)):this.afterLongTap?(clearTimeout(this.afterLongTapTimeout),this.afterLongTap=!1):this.tapTimeout=setTimeout(function(){t._emitEvent("onTap",e),t.isDoubleTap?(t._emitEvent("onDoubleTap",e),clearTimeout(t.singleTapTimeout),t.isDoubleTap=!1):t.isSingleTap&&(t.singleTapTimeout=setTimeout(function(){t._emitEvent("onSingleTap",e)},250),t.isSingleTap=!1)},0)),this.preV.x=0,this.preV.y=0,this.scale=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null,this.multiTouch=!1},render:function(){return l.default.cloneElement(l.default.Children.only(this.props.children),{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchCancel:this.handleTouchCancel,onTouchEnd:this.handleTouchEnd})}});n.default=f,t.exports=n["default"]},241:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}Object.defineProperty(n,"__esModule",{value:!0}),n.InputGroupItem=void 0;var l=i(19),r=a(l),s=i(157),u=a(s),d=i(23),c=a(d),h=i(22),p=a(h),f=i(53),m=a(f),g=i(17),v=i(36),y=i(6),b=a(y),I=i(8),S=r.default.createClass({displayName:"InputGroupItem",mixins:[c.default],getInitialState:function(){return this.theme=(0,g.getThemeHelper)(),{}},handleIncrease:function(e){var t=this.props,n=t.idx,i=t.onIncrease;i&&i(e,n)},handleRemove:function(e){var t=this.props,n=t.idx,i=t.onRemove;i&&i(e,n)},handleChange:function(e){var t=this.props,n=t.idx,i=t.onChange;i&&i(e,n)},handleBlur:function(e){var t=this.props,n=t.idx,i=t.onBlur;i&&i(e,n)},render:function(){var t=this.props,n=t.className,i=t.icon,a=t.placeholder,l=t.inValid,s=t.limit,u=t.idx,d=t.total,c=t.value,h=t.hasError,f=t.deviceInfo,g=o(t,["className","icon","placeholder","inValid","limit","idx","total","value","hasError","deviceInfo"]),y=d===s,I=!1;if(l){var S=h("contentRegex");if(S&&b.default.isPlainObject(S)){if(S.info){var _=S.info.errorContent||[];I=_.indexOf(c)>-1}}else I=!0}return r.default.createElement(m.default,{className:(0,p.default)("fbc_input","fbc_content_item",n,{error:I}),deviceInfo:f,tabIndex:0,inValid:I,"aria-labelledby":g["aria-labelledby"],icon:i,"aria-invalid":I,style:this.theme.getInputBoxStyle(this.theme.NORMAL,!!i),iconStyle:{default:this.theme.getInputBoxIconStyle(this.theme.NORMAL),active:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),error:this.theme.getInputBoxIconStyle(this.theme.ERROR)},value:c||"",placeholder:a,onChange:this.handleChange,onBlur:this.handleBlur},r.default.createElement("span",{className:"fbc_imOperate"},d>1?r.default.createElement(v.BaseBtn,{component:"a",className:"iconfont fbc_removeIcon",style:{default:this.theme.getInputBoxOptIconStyle(this.theme.NORMAL,{isRemove:!0}),hover:this.theme.getInputBoxOptIconStyle(this.theme.HOVER,{isRemove:!0}),active:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE,{isRemove:!0}),focus:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE,{isRemove:!0})},onClick:this.handleRemove},String.fromCharCode(58980)):null,d!==u+1||y?null:r.default.createElement(v.BaseBtn,{component:"a",className:"iconfont fbc_addIcon",style:{default:this.theme.getInputBoxOptIconStyle(this.theme.NORMAL),hover:this.theme.getInputBoxOptIconStyle(this.theme.HOVER),active:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE)},onClick:this.handleIncrease},String.fromCharCode(58979))))}});n.InputGroupItem=S;var _=r.default.createClass({displayName:"InputGroup",mixins:[u.default,c.default],getInitialState:function(){return this.theme=(0,g.getThemeHelper)(),this.getGroupFill=(0,I.memo)(this._getGroupFill),{}},_getGroupFill:function(t){return b.default.isArray(t)?t:[t]},handleIncrease:function(e,t){this.props.onIncreaseItem&&this.props.onIncreaseItem(e,t)},handleRemove:function(e,t){this.props.onRemoveItem&&this.props.onRemoveItem(e,t)},render:function(){for(var t=this.props,n=t.fill,i=t.data,a=t.inValid,o=t.valid,l=t.deviceInfo,s=t.limit,u=t.fieldExtInfo,d=t.onChange,c=t.onBlur,h=t.ariaTriggerOrder,p=[],f=this.getGroupFill(n),m=Math.max(1,f?f.length:1),g=0;g<m;g++)p.push(r.default.createElement(S,{key:"contentItem"+g,deviceInfo:l,hasError:this.hasError,placeholder:i.placeholder,inValid:a,valid:o,"aria-labelledby":0===g?h:null,idx:g,total:m,limit:s,value:f&&f[g],icon:u?u.icon:null,onIncrease:this.handleIncrease,onRemove:this.handleRemove,onChange:d,onBlur:c}));return r.default.createElement("div",{className:"fbc_content_groupList"},p)}});n.default=_},242:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},l=i(6),r=a(l),s=i(19),u=a(s),d=i(157),c=a(d),h=i(23),p=a(h),f=i(17),m=i(38),g=i(22),v=a(g),y=i(243),b=i(36),I=i(26),S=(a(I),u.default.createClass({displayName:"PicAttachmentItem",mixins:[p.default],getInitialState:function(){return this.theme=(0,f.getThemeHelper)(),{previewImage:null}},componentDidMount:function(){this.setPreviewImage()},componentDidUpdate:function(){this.setPreviewImage()},setPreviewImage:function(){var t=this;this.props.value&&this.props.value.getPreview&&this.props.value.getPreview().then(function(n){t.state.previewImage!==n&&t.setState({previewImage:n})},function(){t.setState({previewImage:null})})},handleStartUpload:function(e){var t=this.props,n=t.index,i=t.onClick;e.stopPropagation(),e.preventDefault(),i&&i(e,n)},handleRemove:function(e){var t=this.props,n=t.index,i=t.onRemove;e.stopPropagation(),e.preventDefault(),i&&i(e,n)},handleDisplayStateChange:function(t){this.setState({contentHover:t.hover})},render:function(){var t=this.props,n=t.empty,i=t.data,a=t.value,o=(t.contentWidth,t.processing),l=t.inValidNormal,r=t.inValidSize,s=t.inValidResolution,d=this.state,c=(d.contentHover,d.previewImage),h=i.isLimitFileSize&&i.fileSize?i.fileSize:500,p=(0,f.getLang)(),m=null,g=null,y=l||s||r;if(n||y){var I=null;l?I=p.cUploadFailedILLEGAL_SUFFIX:r?I=p.cUploadFailedILLEGAL_FILE_SIZE({fileSize:h}):s&&(I=p.cUploadFailedILLEGAL_FILE_RESOLUTION),g=y?58938:58997,m=u.default.createElement("div",{className:"fbc_paItem_wrapper"},u.default.createElement("div",{className:"fbc_paImgPlaceholder"},u.default.createElement("i",{className:"iconfont fbc_paImgState"},String.fromCharCode(g))),y?u.default.createElement("div",{className:"fbc_paContentInfo fbc_paError",key:"error"},u.default.createElement("div",{className:(0,v.default)("fbc_paAddTips",{error:y})},I)):u.default.createElement("div",{className:"fbc_paContentInfo",key:"content"},u.default.createElement("div",{className:"fbc_paAddTitle"},p.cPicAttachmentAddTitle),u.default.createElement("div",{className:"fbc_paAddTips"},p.cPicAttachmentAddTips({max:h}))))}else a&&(m=u.default.createElement("div",{className:"fbc_paImgPreview"},u.default.createElement("span",{className:"fbc_reUploadBtn"},p.cPicAttachmentReload),c?u.default.createElement("div",{className:"fbc_selectedImage fbc_selectedImagePreview",style:{backgroundImage:"url("+c+")"}}):null));return u.default.createElement(b.BaseBtn,{component:"li",className:(0,v.default)("fbc_uploadImage","fbc_paItem ",{"is_empty":n,"has_value":a,error:y}),disabled:o,inValid:y,style:null,onClick:this.handleStartUpload,onStateChange:this.handleDisplayStateChange},u.default.createElement("div",{className:"fbc_uploadContent",style:this.theme.getInputBoxExtraStyle()},m),u.default.createElement("span",{className:"fbc_imOperate"},a?u.default.createElement(b.BaseBtn,{component:"a",className:"iconfont fbc_removeImgIcon",disabled:o,onClick:this.handleRemove},String.fromCharCode(58982)):null))}})),_=u.default.createClass({displayName:"PicAttachment",mixins:[c.default,p.default],getInitialState:function(){return this.theme=(0,f.getThemeHelper)(),this.store=(0,f.getStore)(),{processing:!1}},componentDidMount:function(){this.unsubscribe=this.store.addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe&&this.unsubscribe()},handleStateChange:function(t){t.type===m._SET_FILE_DONE&&this._setFileUnLock()},_setFileUnLock:function(){var t=this;setTimeout(function(){t.setState({processing:!1})},100)},handleChange:function(e,t){var n=this.props.data,i=this.state.processing;i||(this.setState({processing:!0}),this.store.dispatch((0,m.SET_FILE)(o({id:n.id},t,{preview:!0}))))},handleRemove:function(e,t){var n=this.props.data;this.store.dispatch((0,m.REMOVE_FILE)(o({id:n.id},t)))},renderTips:function(t){var n=this.props,i=n.data,a=(n.fill,n.valid),o=null,l=a&&(this.hasError("attachmentResolution")||this.hasError("attachmentType"));if(1===i.isLimitPicResolution){if(o=[],i.picMinWidth||i.picMaxWidth){var s="";i.picMinWidth&&i.picMaxWidth?s=i.picMinWidth+"px~"+i.picMaxWidth+"px":i.picMinWidth?s=">"+i.picMinWidth+"px":i.picMaxWidth&&(s="<"+i.picMaxWidth+"px"),o.push((0,f.getLang)().cPicAttachmentTipsWidth({value:s}))}if(i.picMinHeight||i.picMaxHeight){var d="";i.picMinHeight&&i.picMaxHeight?d=i.picMinHeight+"px~"+i.picMaxHeight+"px":i.picMinHeight?d=">"+i.picMinHeight+"px":i.picMaxHeight&&(d="<"+i.picMaxHeight+"px"),o.push((0,f.getLang)().cPicAttachmentTipsHeight({value:d}))}o&&!r.default.isEmpty(o)&&(o=(0,f.getLang)().cPicAttachmentTips({resolution:", "+o.join(", ")}))}else o=(0,f.getLang)().cPicAttachmentTips({resolution:""});return o?u.default.createElement("p",{className:(0,v.default)("fbc_tips",{error:l}),key:"tips",id:"tip-"+i.id,style:t,"aria-label":o},o):null},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,l=(t.layout,this.state.processing),r=this.getComponentLayoutStyleInfo(),s=o&&o.length>0;return u.default.createElement("div",{className:(0,v.default)("fb_component",n.type),id:n.id,style:i},u.default.createElement("div",{className:"fb_componentText",style:r?r.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),u.default.createElement("div",{className:"fb_componentBody",style:r?r.bodyStyle:null},u.default.createElement("div",{className:(0,v.default)("fbc_content"),style:{marginTop:r?0:null}},u.default.createElement(y.AttachmentGroup,{data:n,fill:a,valid:o,inValid:s,processing:l,component:S,contentWidth:this.getContentWidth(),onChange:this.handleChange,onRemove:this.handleRemove})),u.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=_,t.exports=n["default"]},243:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.AttachmentGroup=void 0;var o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},l=i(19),r=a(l),s=i(20),u=a(s),d=i(6),c=a(d),h=i(22),p=a(h),f=i(157),m=a(f),g=i(23),v=a(g),y=i(17),b=i(36),I=i(38),S=i(8),_=i(114),E=r.default.createClass({displayName:"AttachmentItem",mixins:[v.default],getInitialState:function(){return this.theme=(0,y.getThemeHelper)(),{}},handleStartUpload:function(e){var t=this.props,n=t.index,i=t.onClick;e.stopPropagation(),e.preventDefault(),i&&i(e,n)},handleRemove:function(e){var t=this.props,n=t.index,i=t.onRemove;e.stopPropagation(),e.preventDefault(),i&&i(e,n)},handleDisplayStateChange:function(t){this.setState({contentHover:t.hover})},render:function(){var t=this.props,n=t.empty,i=t.data,a=t.value,o=t.contentWidth,l=t.processing,s=t.inValidNormal,u=t.inValidSize,d=t.inValidResolution,c=this.state.contentHover,h=i.isLimitFileSize&&i.fileSize?i.fileSize:500,f=null,m=null,g=null,v=s||d||u;if(n)f=(0,y.getLang)().cFileSizeHint({fileSize:h}),m=58979,g=this.theme.getInputBoxFileIconStyle(this.theme.NORMAL),c&&(g=this.theme.getInputBoxFileIconStyle(this.theme.HOVER));else if(a)if(v){var I=o*(i.cpWidth||8)/10-220,_=null;s?_=(0,y.getLang)().cUploadFailedILLEGAL_SUFFIX:u?_=(0,y.getLang)().cUploadFailedILLEGAL_FILE_SIZE({fileSize:h}):d&&(_=(0,y.getLang)().cUploadFailedILLEGAL_FILE_RESOLUTION),f=r.default.createElement("span",{key:"upload_content",className:"fbc_ufText"},r.default.createElement("span",{className:"fbc_ufTitle"},_),r.default.createElement("span",{className:"fbc_ufSize",title:a.name},(0,S.fileNameBeauty)(a.name,I))),m=58938,g=this.theme.getInputBoxFileIconStyle(this.theme.ERROR)}else{var E=o*(i.cpWidth||8)/10-150;f=r.default.createElement("span",{key:"upload_content",className:"fbc_ufText"},r.default.createElement("span",{className:"fbc_ufTitle",title:a.name},(0,S.fileNameBeauty)(a.name,E)),r.default.createElement("span",{className:"fbc_ufSize"},a.size?(0,S.fileSizeBeauty)(a.size):null)),m=58988,g=this.theme.getInputBoxFileIconStyle(this.theme.ACTIVE)}return r.default.createElement(b.BaseBtn,{component:"li",className:(0,p.default)("fbc_uploadFile",{"is_empty":n,"has_value":a,error:v}),disabled:l,inValid:v,style:this.theme.getInputBoxStyle(this.theme.NORMAL,!0),onClick:this.handleStartUpload,onStateChange:this.handleDisplayStateChange},r.default.createElement(b.BaseBtn,{component:"i",className:"iconfont fbi_icon",style:g},String.fromCharCode(m)),r.default.createElement("div",{className:"fbc_uploadContent",style:this.theme.getInputBoxExtraStyle()},f),r.default.createElement("span",{className:"fbc_imOperate"},a?r.default.createElement(b.BaseBtn,{component:"a",className:"iconfont fbc_removeIcon",disabled:l,style:{default:this.theme.getInputBoxOptIconStyle(this.theme.NORMAL,{isRemove:!0}),hover:this.theme.getInputBoxOptIconStyle(this.theme.HOVER,{isRemove:!0}),active:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE,{isRemove:!0}),focus:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE,{isRemove:!0})},onClick:this.handleRemove},String.fromCharCode(58980)):null))}}),C=n.AttachmentGroup=r.default.createClass({displayName:"AttachmentGroup",mixins:[m.default,v.default],getInitialState:function(){return this.theme=(0,y.getThemeHelper)(),this.store=(0,y.getStore)(),this.uploadPosition=null,{}},handleFileChange:function(e){var t=this,n=this.props,i=n.data,a=n.fill,o=n.onChange,l=e.target.files;if(l&&l.length>0&&null!=this.uploadPosition){var r=[],s=0,d=a&&a[this.uploadPosition];c.default.forEach(l,function(n){i.isAcceptMultipleFile&&i.isLimitFileNumber&&i.fileNumber&&s+t.curentFileNum-(d?1:0)>=i.fileNumber||(s++,r.push(n))}),o&&o(e,{index:this.uploadPosition,files:r}),this.uploadPosition=null,u.default.findDOMNode(this.file).value=""}},handleFileRemove:function(e,t){var n=this.props.onRemove;n&&n(e,{index:t})},handleTriggerUploader:function(e,t){this.uploadPosition=t,u.default.findDOMNode(this.file).click()},refFile:function(t){this.file=t},_checkInValidState:function(t,n){var i=this.hasError(t);return!!i&&i.info.errorContent.indexOf(n)>-1},renderBox:function(){var t=this,n=this.props,i=n.data,a=n.fill,l=n.contentWidth,s=n.component,u=n.processing,d=0,h=[],p={data:i,processing:u,contentWidth:l,onClick:this.handleTriggerUploader,onRemove:this.handleFileRemove};return a&&a.length>0&&c.default.forEach(a,function(n,i){var a=!1,l=void 0,u=void 0;c.default.forEach(["attachmentIllegal","attachmentType"],function(i){var o=t._checkInValidState(i,n.name);if(o)return a=!0,!1}),l=t._checkInValidState("attachmentSize",n.name),u=t._checkInValidState("attachmentResolution",n.name),h.push(r.default.createElement(s,o({key:"file"+i},p,{index:d,value:n,inValidNormal:a,inValidSize:l,inValidResolution:u}))),d++}),this.curentFileNum=d,(!i.isAcceptMultipleFile&&0===d||i.isAcceptMultipleFile&&(!i.isLimitFileNumber||i.isLimitFileNumber&&(!i.fileNumber||i.fileNumber&&d<i.fileNumber)))&&h.push(r.default.createElement(s,o({key:"fileEmpty",empty:!0},p,{index:d}))),h},render:function(){var t=this.props.data;return r.default.createElement("div",{className:"fbc_attachment_wrapper"},r.default.createElement("ul",{className:"fbc_awList clear"},this.renderBox()),r.default.createElement("input",{className:"fbc_uploadWorker",type:"file",ref:this.refFile,multiple:1===t.isAcceptMultipleFile,onChange:this.handleFileChange}))}}),T=r.default.createClass({displayName:"Attachment",mixins:[m.default,v.default],getInitialState:function(){return this.theme=(0,y.getThemeHelper)(),this.store=(0,y.getStore)(),{processing:!1}},componentDidMount:function(){this.unsubscribe=this.store.addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe&&this.unsubscribe()},handleStateChange:function(t){t.type===I._SET_FILE_DONE&&this._setFileUnLock()},_setFileUnLock:function(){var t=this;setTimeout(function(){t.setState({processing:!1})},100)},handleChange:function(e,t){var n=this.props.data,i=this.state.processing;i||(this.setState({processing:!0}),this.store.dispatch((0,I.SET_FILE)(o({id:n.id},t,{preview:!1}))))},handleRemove:function(e,t){var n=this.props.data;this.store.dispatch((0,I.REMOVE_FILE)(o({id:n.id},t)))},renderTips:function(t){var n=this.props,i=n.data,a=(n.fill,n.valid);if(1===i.isLimitFileType&&!c.default.isEmpty(i.fileTypes)){var o=a&&this.hasError("attachmentType"),l=[];c.default.forEach(_.ATTACHMENT_TYPE_LIST,function(t,n){i.fileTypes.indexOf(n)>-1&&l.push(t)});var s=(0,y.getLang)().cFileSupportFunc({fileTypes:l.join(", ")});return r.default.createElement("p",{className:(0,p.default)("fbc_tips",{error:o}),key:"tips",id:"tip-"+i.id,style:t,"aria-label":s},s)}return null},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,l=t.layout,s=this.state.processing,u=this.getComponentLayoutStyleInfo(),d=o&&o.length>0;return r.default.createElement("div",{className:(0,p.default)("fb_component",n.type),id:n.id,style:i},r.default.createElement("div",{className:"fb_componentText",style:u?u.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),r.default.createElement("div",{className:"fb_componentBody",style:u?u.bodyStyle:null},r.default.createElement("div",{className:(0,p.default)("fbc_content","fbc_widthCp"),style:{width:(this.isMobile()||l.isSqueeze?100:10*(n.cpWidth||8))+"%",marginTop:u?0:null}},r.default.createElement(C,{data:n,fill:a,valid:o,inValid:d,processing:s,component:E,contentWidth:this.getContentWidth(),onChange:this.handleChange,onRemove:this.handleRemove})),r.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=T},260:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}Object.defineProperty(n,"__esModule",{value:!0});var l=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},r=function(){function t(t,n){var i=[],a=!0,o=!1,l=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(t){o=!0,l=t}finally{try{!a&&s["return"]&&s["return"]()}finally{if(o)throw l}}return i}return function(n,i){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=i(22),u=a(s),d=i(19),c=a(d),h=i(20),p=a(h),f=i(23),m=a(f),g=i(33),v=a(g),y=i(35),b=a(y),I=i(28),S=a(I),_=i(37),E=a(_),C=i(8),T=i(17),x=i(261),O=a(x),N=i(36),L=i(238),M=a(L),R=(0,S.default)((0,E.default)((0,b.default)(v.default))),w=function(t){return{left:Math.round(t.left),top:Math.round(t.top),width:Math.round(t.width),height:Math.round(t.height)}},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return new Promise(function(n){window.setTimeout(function(){n(!0)},t)})},B=c.default.createClass({displayName:"PreviewImage",mixins:[m.default],getInitialState:function(){return{visible:!1,displayScale:1,displayOffset:[0,0]}},preview:function(t,n,i){var a=this,o=p.default.findDOMNode(t),l=w(o.getBoundingClientRect());this.setState({visible:!0,originalPlace:l,image:n,position:l}),Promise.all([P(300),(0,C.getImageSize)(i)]).then(function(t){var n=r(t,2),o=(n[0],n[1]),l=(0,T.getDeviceInfo)(),s=l.getClientWidth(),u=l.getClientHeight(),d=1;.8*u<o.height&&(d=Math.min(.8*u/o.height,d)),.8*s<o.width&&(d=Math.min(.8*s/o.width,d));var c={left:Math.round((s-o.width*d)/2),top:Math.round((u-o.height*d)/2),width:Math.round(o.width*d),height:Math.round(o.height*d)};a.setState({image:i,position:c})})},handleClose:function(){var t=this;this.setState({position:this.state.originalPlace,displayScale:1,displayOffset:[0,0]},function(){t.setState({visible:!1})})},handlePinch:function(e){e.stopPropagation(),this.setState({displayScale:Math.max(Math.min(1.5,e.scale),.5)})},handleMove:function(e){e.stopPropagation();var t=this.state.displayOffset,n=isNaN(e.deltaX)?0:e.deltaX,i=isNaN(e.deltaY)?0:e.deltaY;this.setState({displayOffset:[t[0]+n,t[1]+i]})},handleWheel:function(e){e.stopPropagation();var t=void 0,n=void 0;"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),t=10*n,"deltaY"in e&&(t=e.deltaY),t&&e.deltaMode&&(t*=1==e.deltaMode?40:800),t<-30&&this.setState({displayScale:Math.min(1.5,this.state.displayScale+.05)}),t>30&&this.setState({displayScale:Math.max(.5,this.state.displayScale-.05)})},render:function(){var t=this.props,n=t.className,i=o(t,["className"]),a=this.state,r=a.visible,s=a.image,d=a.position,h=a.displayScale,p=a.displayOffset,f=l({},d,{transform:"scale("+h+") translate("+p.map(function(t){return(t||0)+"px"})+")"});return c.default.createElement(R,l({className:(0,u.default)("cp-popwin","cp-pop-preview",n),visible:r,onClickAway:this.handleClose,onClose:this.handleClose},i),c.default.createElement("div",{className:"cp-previewBox"},c.default.createElement(M.default,{onPinch:this.handlePinch,onPressMove:this.handleMove},c.default.createElement("img",{className:"cp-preview-image",src:s,style:f,onWheel:this.handleWheel})),c.default.createElement(N.BaseBtn,{component:"div",className:"cp-preview-close"},c.default.createElement(O.default,{className:"cpp-close",onClick:this.handleClose}))))}});n.default=B,t.exports=n["default"]},261:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},l=i(19),r=a(l),s=function(t){return r.default.createElement("svg",o({viewBox:"0 0 24 24"},t),r.default.createElement("g",null,r.default.createElement("path",{d:"M13.414 12l5.793-5.793c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0L12 10.586 6.207 4.793c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414L10.586 12l-5.793 5.793c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293L12 13.414l5.793 5.793c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L13.414 12z"})))};n.default=s,t.exports=n["default"]}});