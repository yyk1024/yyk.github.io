webpackJsonp([2,13],{158:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(159),l=a(o),r=i(206),s=a(r),u=i(243),c=a(u),d=i(242),h=a(d),f=i(258),p=a(f),m=i(259),g=a(m),y=i(264),v=a(y),b=i(265),C=a(b),I=i(266),S=a(I),_=i(267),x=a(_),E=i(271),N=a(E),T=i(272),O=a(T);n.default={tel:l.default,number:s.default,attachment:c.default,picAttachment:h.default,separator:p.default,commodity:g.default,staticText:v.default,staticPic:C.default,company:S.default,department:S.default,position:S.default,city:x.default,location:x.default,address:N.default,wechat:O.default},t.exports=n["default"]},258:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),l=a(o),r=i(22),s=a(r),u=i(157),c=a(u),d=i(23),h=a(d),f=i(17),p=["","left","center","right"],m=["","dotted","dashed","solid","double"],g=l.default.createClass({displayName:"Separator",mixins:[c.default,h.default],getInitialState:function(){return this.theme=(0,f.getThemeHelper)(),{}},render:function(){var t=this.props,n=t.data,i=t.style,a=_.assign({textAlign:p[n.titleAlign]},this.theme.getComponentTitleStyle()),o=_.assign({textAlign:p[n.subTitleAlign]},this.theme.getComponentDescStyle()),r=null;return n.isNoPadding&&(r={marginLeft:0,marginRight:0}),l.default.createElement("div",{className:(0,s.default)("fb_component","fb_staticComponent",n.type),id:n.id,style:i},this.renderTitle(a,{htmlEntityMode:!0}),l.default.createElement("hr",{className:"fbc_separatorHr "+m[n.borderType],style:r}),this.renderSubtitle(o,{htmlEntityMode:!0}))}});n.default=g,t.exports=n["default"]},259:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){var i=[],a=!0,o=!1,l=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(t){o=!0,l=t}finally{try{!a&&s["return"]&&s["return"]()}finally{if(o)throw l}}return i}return function(n,i){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},r=i(19),s=a(r),u=i(20),c=a(u),d=i(6),h=a(d),f=i(22),p=a(f),m=i(157),g=a(m),y=i(23),v=a(y),b=i(17),C=i(36),I=i(26),S=a(I),_=i(260),x=a(_),E=i(38),N=i(55),T=i(7),O=i(262),M=a(O),L=i(8),P=i(60),w=a(P),B=i(263),R=a(B),A=s.default.createClass({displayName:"CommodityTitle",mixins:[v.default],_stopPop:function(e){e.stopPropagation()},handleLinkBtnStateChange:function(t){this.props.onHover&&this.props.onHover(t.hover)},render:function(){var t=this.props,n=t.url,i=t.data,a=(t.isMobile,t.style),o=(0,L.autoMbrmLinkify)(n);return s.default.createElement("p",{className:"fbc_commodityTitle",style:a},o?s.default.createElement(C.BaseBtn,{component:"a",className:"fbc_commodityLink",onStateChange:this.handleLinkBtnStateChange,onMouseDown:this._stopPop,target:"_blank",href:o,rel:"noreferrer"},i.name):i.name)}}),D=s.default.createClass({displayName:"CommodityItem",mixins:[v.default],getInitialState:function(){this.operator=null,this.optNum=null,this.optImageContainer=null,this.optChoiceContainer=null,this.theme=(0,b.getThemeHelper)();var t={linkActive:!1,optionNoInfo:null};return t=l({},t,this.getOptionNoInfo(t))},componentDidUpdate:function(t){this.props.hideNoQuota===t.hideNoQuota&&this.props.onRenderOptionNum===t.onRenderOptionNum||this.setState(this.getOptionNoInfo(this.state))},getOptionNoInfo:function(t){var n=this.props,i=n.hideNoQuota,a=n.onRenderOptionNum,o=t.optionNoInfo,l=this.getRemainingQuota();if(i&&l.accMaxCanUse<=0){if(o)return this.optNum=null,{optionNoInfo:null}}else{var r=a();if(!o||r.join("-")!==o.join("-"))return this.optNum=r[0],{optionNoInfo:r}}return{optionNoInfo:o}},getComponentSize:function(){return this.optNum&&this.operator?{num:this.optNum,imageSize:this.optImageContainer?c.default.findDOMNode(this.optImageContainer).getBoundingClientRect():null,size:c.default.findDOMNode(this.operator).getBoundingClientRect(),choiceSize:c.default.findDOMNode(this.optChoiceContainer).getBoundingClientRect()}:null},handleClick:function(){var t=this.props,n=t.data,i=t.onChange,a=t.value,o=this.getRemainingQuota();a<o.accMaxCanUse&&i&&i({id:n.sId,num:a+1}),this.operator.blur()},handleARIA_select:function(e){if(this.operator&&this.operator.isFocus()&&(13===e.keyCode||32===e.keyCode)){e.preventDefault();var t=this.props,n=t.data,i=t.onChange,a=t.value,o=this.getRemainingQuota();a<o.accMaxCanUse&&i&&i({id:n.sId,num:a+1})}},handleStopPop:function(e){e.stopPropagation()},handlePreviewImage:function(e){e.stopPropagation();var t=this.props,n=t.data,i=t.index,a=t.onPreview,o=null,l=null;n.image&&(n.image.isLink?(o=n.image.linkUri,l=o):n.image.u&&n.image.e&&(o=n.image.imageUri,l=n.image.imageFullUri)),o&&a&&a(i,this.optImageContainer,{image:o,imageFull:l})},handleQuantityChange:function(e,t){var n=this.props,i=n.data,a=n.onChange;a&&a({id:i.sId,num:t})},handleOperatorBlur:function(){this.operator.blur()},handleLinkBtnHover:function(t){this.setState({linkActive:t})},refOptImage:function(t){this.optImageContainer=t},refOptChoice:function(t){this.optChoiceContainer=t},refOperator:function(t){this.operator=t},renderDescribe:function(t){if(!t||h.default.isArray(t)&&""===t.join(""))return"";if(h.default.isArray(t)){var n=t.length;return h.default.map(t,function(t,i){return!t&&n>1?s.default.createElement("br",{key:"el"+i}):s.default.createElement("span",{key:"l"+i},t,i+1!==n?s.default.createElement("br",null):null)})}return""+t},getRemainingQuota:function(){var t=this.props.limitInfo,n=1/0,i=1/0;if(t){var a=(0,L.quotaCalculate)(t);n=(0,L.maxCanUseCalculate)(a),i=a.remaining}return{remaining:i,maxCanUse:n,accMaxCanUse:Math.min(i,n)}},renderLimit:function(t){var n=t.remaining,i=t.maxCanUse,a=this.props,o=a.showLimit,l=a.tipsStyle;if(isFinite(n)||isFinite(i)){var r=(0,b.getLang)(),u="";return o&&n>0?isFinite(n)?u=isFinite(i)?r.cCommodityRemainMaxTips({max:i,remain:n}):r.cQuotaRemainingFunc({remaining:n}):isFinite(i)&&(u=r.cCommodityMaxTips({max:i})):n<=0&&(u=r.cQuotaRemainingFunc({remaining:0})),s.default.createElement("span",{className:"fbc_commodityTips",style:l},u)}return null},renderImageBlock:function(){var t=this.props,n=t.data,i=t.onImageLoad,a=t.sizeList,o=t.layout,l=null;a&&(l=a[Math.ceil(this.optNum/o)-1]);var r=null;return n.image&&(n.image.isLink?r=n.image.linkUri:n.image.u&&n.image.e&&(r=1===o&&n.image.imageFullUri?n.image.imageFullUri:n.image.imageUri)),r?s.default.createElement("div",{className:"fbc_picOptionImage",ref:this.refOptImage,style:{minHeight:l?l.imageHeight:null}},s.default.createElement(S.default,{className:"fbc_picOptionImg",src:r,onLoad:i}),s.default.createElement(C.BaseBtn,{className:"fbc_imgPreview iconfont",onMouseDown:this.handleStopPop,onTouchStart:this.handleStopPop,onClick:this.handlePreviewImage},String.fromCharCode(59010))):l&&l.imageHeight?s.default.createElement("div",{className:"fbc_picOptionImagePlaceholder",style:{minHeight:l?l.imageHeight:null}},s.default.createElement("div",{className:"fbc_picopContent"},h.default.filter([n.name,n.describe.join("")]).join("Â·"))):null},renderInputBlock:function(t){var n=this.props,i=n.data,a=n.value,o=n.isHidePrice,l=n.sizeList,r=n.layout,u=n.symbol,c=n.contentSize,d=n.isMobile,h=(t.disabled,t.remaining),f=t.maxCanUse,m=t.accMaxCanUse,g=null;l&&(g=l[Math.ceil(this.optNum/r)-1]);var y=i.isJumpTo&&i.jumpTo,v=null;if(y){var b=(0,L.linkify)(i.jumpTo);b&&(v=b)}return s.default.createElement("div",{className:"fbc_commodityInput",ref:this.refOptChoice,style:{minHeight:g?g.choiceHeight:null}},s.default.createElement("div",{className:"fbc_commodityContentWrapper"},s.default.createElement(A,{url:y?v:null,data:i,isMobile:d,style:this.theme.getComponentCommodityNameStyle(),onHover:this.handleLinkBtnHover}),i.describe?s.default.createElement("p",{className:"fbc_commodityDescribe",style:this.theme.getComponentCommodityDescribeStyle()},this.renderDescribe(i.describe)):null,this.renderLimit({remaining:h,maxCanUse:f})),s.default.createElement("div",{className:(0,p.default)("fbc_commodityPriceWrapper",{isHidePrice:o})},o?null:s.default.createElement(R.default,{component:"p",className:"fbc_commodityPrice",reset:!0,contentWidth:c},s.default.createElement(w.default,{symbol:u,price:i.price})),s.default.createElement(M.default,{className:"fbc_commodityQuantity",min:0,max:m,value:a,onBlur:this.handleOperatorBlur,onChange:this.handleQuantityChange})))},render:function(){var t=this.props,n=t.className,i=t.style,a=t.active,r=t.chooseMax,u=t.hideNoQuota,c=t.sizeList,d=t.layout,h=t.pictureLayout,f=t.inValid,m=this.state,g=m.linkActive,y=m.optionNoInfo,v=this.getRemainingQuota();if(u&&v.accMaxCanUse<=0)return null;var b=v.accMaxCanUse<=0||!a&&r,I=void 0,S=void 0;if(y){var _=o(y,2);I=_[0],S=_[1]}var x=i;if(c){var E=c[Math.ceil(I/d)-1],N={minHeight:E?E.optHeight:null};N.minHeight&&(x=(0,L.styleInject)(x,N))}var T=h&&[2,4].indexOf(+h)>-1,O=this.renderInputBlock(l({no:S,disabled:b},v));return s.default.createElement(C.BaseBtn,{component:"li",className:(0,p.default)("fbc_picOptionsLi","fbc_commodity_li",n,{"disabled":b,"error":f,"link_active":g},"fbc_option_content_layout_"+h),style:x,disabled:b,onKeyDown:this.handleARIA_select,role:"gridcell",tabIndex:0,ref:this.refOperator},T?O:null,this.renderImageBlock(),T?null:O,s.default.createElement("div",{className:"clearB","aria-hidden":!0}))}}),k=s.default.createClass({displayName:"Commodity",mixins:[g.default,v.default],contextTypes:{updateEmbedContainer:s.default.PropTypes.func},getInitialState:function(){return this.theme=(0,b.getThemeHelper)(),this.store=(0,b.getStore)(),this.form=(0,b.getFormStructure)(),this.options=[],this.updateOptionSize=h.default.debounce(this._updateOptionSize,200),this.handleImageLoaded=h.default.debounce(this._imageLoaded,400),this.handleResize=h.default.debounce(this._handleResize,200),{updateCount:0,sizeList:null,contentSize:null,previewIdx:-1}},componentDidMount:function(){this.unbindEvent=(0,T.onResize)(this.handleResize),this.unbind=this.store.addChangeListener(this.handleStateChange),this.updateOptionSize()},componentWillUnmount:function(){this.unbindEvent&&this.unbindEvent(),this.unbind&&this.unbind(),this.updateOptionSize=null,this.handleImageLoaded=null,this.options=[],this.unmount()},_updateOptionSize:function(){var t=this,n=this.getCommodityLayoutType(),i=null,a=null;n>1&&(i=[],h.default.forEach(this.options,function(t){if(t){var o=t.getComponentSize();if(!o)return;!a&&o.choiceSize&&(a=o.choiceSize.width-100);var l=Math.ceil(o.num/n)-1,r=Math.ceil(o.imageSize?o.imageSize.height:0),s=Math.ceil(o.size.height),u=Math.ceil(o.choiceSize?o.choiceSize.height:0);null==i[l]?i[l]={imageHeight:r,optHeight:s,choiceHeight:u}:i[l]={imageHeight:Math.max(i[l].imageHeight,r),optHeight:Math.max(i[l].optHeight,s),choiceHeight:Math.max(i[l].choiceHeight,u)}}})),this.setState({sizeList:i,contentSize:a},function(){t.context.updateEmbedContainer&&t.context.updateEmbedContainer()})},_handleResize:function(){var t=this;this.setState({updateCount:(this.state.updateCount+1)%10,sizeList:null},function(){t.updateOptionSize()})},handleStateChange:function(t){t.type===E._PAGING_CHANGE_END&&this._handleResize()},_imageLoaded:function(){var t=this;this.setState({updateCount:(this.state.updateCount+1)%10,sizeList:null},function(){t.updateOptionSize()})},handlePreviewImage:function(t,n,i){var a=n.querySelector("img");this.previewer&&this.previewer.preview(a||n,i.image,i.imageFull),this.setState({previewIdx:t})},handlePreviewerUnmount:function(){this.setState({previewIdx:null})},handleChangeCommodity:function(t){var n=this.props.data;this.store.dispatch((0,E.SET_COMMODITY_VALUE)({id:n.id,data:t}))},handleRenderOptionNum:function(){var t=this.props.data,n=++this.optionNum;return t.isAutoNo?[n,(0,N.OPTION_NUM)(n,t.autoNo)]:[n,null]},hasValue:function(t){var n=this.props.fill,i=!1;return h.default.forEach(n||[],function(n){if(t===n)return i=!0,!1}),i},getCommodityLayoutType:function(){var t=this.props,n=t.data,i=t.inSqueeze,a=n.optionsLayout||3;return(this.isMobile()||i)&&(a=[3,4].indexOf(+n.picLayout)>-1?2:Math.min(2,a)),a},refPreview:function(t){this.previewer=t},refPicOption:function(t){this.options.push(t)},renderCommodities:function(){var t=this;this.optionNum=0;var n=this.props,i=n.data,a=n.fill,o=n.valid,r=this.state,u=r.previewIdx,c=r.sizeList,d=r.contentSize,f=this.getCommodityLayoutType(),m=[],g=o&&o.length>0,y=this.optionBlockStyle=this.optionBlockStyle||{default:this.theme.getOptionStyle(this.theme.NORMAL),hover:this.theme.getOptionStyle(this.theme.HOVER),active:this.theme.getOptionStyle(this.theme.HOVER)},v=(0,b.getCartSymbol)(),C=v.symbol,I={isMobile:this.isMobile(),inValid:g,symbol:C,pictureLayout:+(i.picLayout||1),showLimit:i.isShowOptionLimit,hideNoQuota:i.isHideFullOption,isHidePrice:i.isHidePrice,sizeList:c,contentSize:d,layout:f,onPreview:this.handlePreviewImage,onChange:this.handleChangeCommodity,onRenderOptionNum:this.handleRenderOptionNum,onImageLoad:this.handleImageLoaded,style:y,optStyle:this.theme.getPicOptionIconStyle()},S=null;return i.isLimitOptions&&i.optionsQuotaInfo&&(S=i.optionsQuotaInfo),h.default.forEach(i.commodities,function(n,i){var o=S&&S[n.sId]?S[n.sId]:null;m.push(s.default.createElement(D,l({data:n,key:"cmd-"+n.sId,index:i,value:a?a[n.sId]||0:0,ref:t.refPicOption,className:(0,p.default)({"in-preview":u===i}),limitInfo:o},I)))}),m},renderTips:function(t){return null},render:function(){var t=this.props,n=t.data,i=t.style,a=this.getCommodityLayoutType();return s.default.createElement("div",{className:(0,p.default)("fb_component",n.type),id:n.id,style:i},s.default.createElement("div",{className:"fb_componentText"},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),s.default.createElement("div",{className:"fb_componentBody"},s.default.createElement("div",{className:(0,p.default)("fbc_content_commodity","fbc_options_layout","fbc_options_layout_"+a)},s.default.createElement("ul",{role:"grid",tabIndex:0,"aria-labelledby":this.ariaLabelTriggerOrder()},this.renderCommodities()),s.default.createElement("div",{className:"clearB"}))),s.default.createElement(x.default,{ref:this.refPreview,onUnmount:this.handlePreviewerUnmount}))}});n.default=k,t.exports=n["default"]},262:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(22),l=a(o),r=i(19),s=a(r),u=i(23),c=a(u),d=i(36),h=s.default.createClass({displayName:"BaseNumberPicker",mixins:[c.default],getDefaultProps:function(){return{value:0,min:0,max:1/0}},getInitialState:function(){return{focus:!1}},getValue:function(){var t=this.props.value;return null!=t&&!isNaN(t)&&isFinite(t)||(t=0),t},handleStopPop:function(e){e.stopPropagation()},handleInputFocus:function(e){e.stopPropagation(),this.setState({focus:!0})},handleInputChange:function(e){e.stopPropagation(),this.handleChangeValue(e,+e.target.value)},handleInputBlur:function(e){e.stopPropagation(),this.setState({focus:!1}),this.handleChangeValue(e,+e.target.value);var t=this.props.onBlur;t&&t()},handleChangeValue:function(e,t){var n=this.props,i=n.min,a=n.max,o=n.value,l=n.onChange;null==i&&(i=0),null==a&&(a=1/0),null!=t&&!isNaN(t)&&isFinite(t)||(t=o||0),t<=i?t=i:t>=a&&(t=a),l&&l(e,t)},handleDecrease:function(e){e.stopPropagation(),this.handleChangeValue(e,this.props.value-1);var t=this.props.onBlur;t&&t()},handleIncrease:function(e){e.stopPropagation(),this.handleChangeValue(e,this.props.value+1);var t=this.props.onBlur;t&&t()},handleKeyDecrease:function(e){var t=this.props,n=t.min,i=t.max,a=t.disabled,o=this.getValue();if(null==n&&(n=0),null==i&&(i=1/0),n===i&&0===n&&(a=!0),13===e.keyCode||32===e.keyCode){if(e.preventDefault(),e.stopPropagation(),o>=i||a)return;this.handleChangeValue(e,this.props.value-1)}},handleKeyIncrease:function(e){var t=this.props,n=t.min,i=t.max,a=t.disabled,o=this.getValue();if(null==n&&(n=0),null==i&&(i=1/0),n===i&&0===n&&(a=!0),13===e.keyCode||32===e.keyCode){if(e.preventDefault(),e.stopPropagation(),o>=i||a)return;this.handleChangeValue(e,this.props.value+1)}},render:function(){var t=this.props,n=t.className,i=t.btnStyle,a=t.inputStyle,o=t.style,r=this.props,u=r.min,c=r.max,h=r.disabled,f="bb-npicker-",p=this.getValue();return null==u&&(u=0),null==c&&(c=1/0),u===c&&0===u&&(h=!0),s.default.createElement(d.BaseBtn,{component:"span",className:(0,l.default)("bb-number-picker",n),prefix:f,style:o,disabled:h,role:"spinbutton",onMouseDown:this.handleStopPop,onTouchStart:this.handleStopPop,"aria-hidden":!0},s.default.createElement(d.BaseBtn,{className:"iconfont bb-np-btn bb-np-decrease",style:i,tabIndex:0,role:"button","aria-disabled":p<=u||h,"aria-label":" - ",disabled:p<=u||h,onMouseDown:this.handleStopPop,onKeyDown:this.handleKeyDecrease,onTouchStart:this.handleStopPop,onClick:this.handleDecrease},String.fromCharCode(58980)),s.default.createElement("input",{className:"bb-np-data",style:a,value:""+p,tabIndex:0,role:"number",disabled:h,onClick:this.handleStopPop,onKeyDown:this.handleStopPop,onKeyUp:this.handleStopPop,onChange:this.handleInputChange,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur}),s.default.createElement(d.BaseBtn,{className:"iconfont bb-np-btn bb-np-increase",style:i,tabIndex:0,role:"button","aria-disabled":p>=c||h,"aria-label":" + ",disabled:p>=c||h,onMouseDown:this.handleStopPop,onKeyDown:this.handleKeyIncrease,onTouchStart:this.handleStopPop,onClick:this.handleIncrease},String.fromCharCode(58979)),s.default.createElement("span",{className:"bb-np-bg","aria-hidden":!0}))}});n.default=h,t.exports=n["default"]},263:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}Object.defineProperty(n,"__esModule",{value:!0});var l=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},r=i(6),s=(a(r),i(19)),u=a(s),c=i(20),d=a(c),h=i(23),f=a(h),p=i(8),m=u.default.createClass({displayName:"BaseFlexibleText",mixins:[f.default],getDefaultProps:function(){return{component:"div",minFontSize:12}},getInitialState:function(){return{fontSize:null}},componentDidMount:function(){this._calcFontSize()},componentDidUpdate:function(){this._calcFontSize()},_calcFontSize:function(){var t=this,n=this.props,i=n.contentWidth,a=n.minFontSize,o=n.measureText,l=n.reset;if(i){var r=d.default.findDOMNode(this.text),s=o||r.innerText;this.fontInfo||(this.fontInfo=(0,p.getFontInfo)(r));var u=function(n){return(0,p.getTextWidth)(s,n+"px/"+t.fontInfo.lineHeight+" "+t.fontInfo.font)},c=this.fontInfo.fontSize,h=null;for(h=u(c);h>i&&c>a;)c--,h=u(c);l&&c===a&&h>i&&(c=this.fontInfo.fontSize),this.setState({fontSize:c})}},refText:function(t){this.text=t},render:function(){var t=this.props,n=t.component,i=t.style,a=t.children,r=(t.contentWidth,t.minFontSize,t.measureText,t.reset,o(t,["component","style","children","contentWidth","minFontSize","measureText","reset"])),s=this.state.fontSize,c=i;return s&&(c=l({},c,{fontSize:s})),u.default.createElement(n,l({},r,{ref:this.refText,style:c}),a)}});n.default=m,t.exports=n["default"]},264:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),l=a(o),r=i(22),s=a(r),u=i(157),c=a(u),d=i(23),h=a(d),f=i(17),p=i(181),m=a(p),g=function(t){var n=(0,f.getCurrentLang)(),i="ar"===n;return{1:i?"right":"justify",2:"center",3:i?"left":"right"}[t]},y=l.default.createClass({displayName:"StaticContent",mixins:[c.default,h.default],getInitialState:function(){return this.theme=(0,f.getThemeHelper)(),{}},renderFoldText:function(){var t=this.props.data;return t.isFoldText?l.default.createElement("span",{className:(0,s.default)("fbc_describe fbc_foldTips"),id:"sub-"+t.id},this.renderRichContent(t.foldContent||"",t.foldContent_style||null,!0)):null},renderContent:function(){var t=this.props.data;return t.title&&0!==this.getRawContent(t.title).length?l.default.createElement("span",{className:(0,s.default)("fbc_describe"),id:"sub-"+t.id},this.renderRichContent(t.title||"",t.title_style||null,!0)):null},render:function(){var t=this.props,n=t.data,i=t.style,a=_.assign({textAlign:g(n.subTitleAlign||1)},this.theme.getComponentDescStyle());return l.default.createElement("div",{className:(0,s.default)("fb_component","fb_staticComponent",n.type),id:n.id,style:i},l.default.createElement(m.default,{style:a,expandBtnClassName:"fbc_foldBtn",expandedText:(0,f.getLang)().cFoldText,collapsedText:(0,f.getLang)().cUnFoldText,tips:n.isFoldText?this.renderFoldText():null,iconStyle:{default:this.theme.getTriggerIconStyle(this.theme.NORMAL),active:this.theme.getTriggerIconStyle(this.theme.ACTIVE)},content:this.renderContent()}))}});n.default=y,t.exports=n["default"]},265:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t){return Array.isArray(t)?t:Array.from(t)}function l(t){if(Array.isArray(t)){for(var n=0,i=Array(t.length);n<t.length;n++)i[n]=t[n];return i}return Array.from(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.getAllImageMetaSize=void 0;var r=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=i(6),u=a(s),c=i(19),d=a(c),h=i(22),f=a(h),p=i(157),m=a(p),g=i(23),y=a(g),v=i(17),b=i(181),C=a(b),I=i(26),S=a(I),_=i(8),x=1,E=2,N={layout:1,emptyMinSize:10,gap:5},T=function(t,n,i){var a,o=i.gap,r=(a=Math.max).call.apply(a,[null].concat(l(u.default.map(t,function(t){return t?t.height:0})))),s=0,c=(t.length-1)*o,d=u.default.reduce(t,function(t,n){return n?t+Math.floor(n.width*(r/n.height)):(s++,t)},0),h=1;d+c>n&&(h=(n-c)/d);var f=function(t){return Math.floor(t*h)},p={width:0,height:0};if(n-d-c>0){var m=n-d-c;p.width=Math.floor(m/s),p.height=f(r)}return{images:u.default.map(t,function(t){return t?{width:f(t.width*(r/t.height)),height:f(r)}:p})}},O=function(t,n,i,a){var o=a.emptyMinSize,l=a.gap,r=t?t.height:o,s=t?t.width:0,c=0,d=(n.length-1)*l,h=u.default.reduce(n,function(t,n){return n?t+n.width:(c++,t)},0),f=0;c===n.length?(f=(i-l)/2,t||(r=.6*f,s=f)):f=h/(n.length-c);var p=null,m=u.default.map(n,function(t){return t?{width:Math.floor(f),height:Math.floor(t.height*f/t.width)}:null});c===n.length||(p=u.default.reduce(m,function(t,n){return n?t+n.height:t},0));var g=Math.floor(Math.max(p+d,r)),y={width:0,height:0};c>0&&g-d>p&&(y.height=Math.floor((g-d-p)/c),y.width=f),m=u.default.map(m,function(t){return t?t:y});for(var v={width:t?Math.floor(s*(g/r)):Math.max(0,Math.floor(i-l-f)),height:Math.floor(g)},b=function(){var t=(i-l)/(v.width+f);v={width:Math.floor(t*v.width),height:Math.floor(t*v.height)};var n=0;f=Math.floor(t*f),m=u.default.map(m,function(i){var a=Math.floor(t*i.height);return n+=a,{width:f,height:a}});var a=Math.floor(Math.max(n+d,v.height));if(a!==v.height){var o=a/v.height;v={width:Math.floor(o*v.width),height:Math.floor(o*v.height)}}};v.width+l+f>i;)b();return{single:v,group:m}},M=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,i=n.containerWidth,a=n.layout,l=n.emptyMinSize,r=n.gap,s=x;switch(a>1&&t.length>2&&(s=E),s){case x:return T(t,i,{emptyMinSize:l,gap:r});case E:var u=null,c=null;if(2===a){var d=o(t);u=d[0],c=d.slice(1)}else if(3===a){var h=t.length;c=t.slice(0,h-1),u=t[h-1]}return O(u,c,i,{emptyMinSize:l,gap:r})}};n.getAllImageMetaSize=M;var L=["","left","center","right"],P="images/form/picStatic_imgPlaceholder.png",w=d.default.createClass({displayName:"PictureBlock",mixins:[y.default],getInitialState:function(){return{error:!1}},handleOpenLink:function(e){e.preventDefault();var t=this.props,n=t.src,i=t.link,a=(0,_.autoMbrmLinkify)(i);n&&a&&window.open(a)},onError:function(){this.setState({error:!0})},render:function(){var t=this.props,n=t.src,i=t.size,a=t.style,o=t.link,l=this.state.error,r=(0,_.linkify)(o);return d.default.createElement("div",{className:(0,f.default)("fbc_pictureImage",{"fbc_pictureEmpty":!n,"fbc_pictureLink":n&&r}),style:a,onClick:this.handleOpenLink},n&&!l?d.default.createElement(S.default,{className:"fbc_piImg",key:"img",style:i,onError:this.onError,noLazy:i&&i.height>300,src:n}):d.default.createElement("div",{className:"fbc_piImgEmpty",key:"imgPlaceholder",style:i},l?d.default.createElement(S.default,{style:{objectFit:"scale-down",width:"100%",height:"100%"},src:P}):null))}}),B=d.default.createClass({displayName:"StaticPicture",mixins:[m.default,y.default],contextTypes:{updateEmbedContainer:d.default.PropTypes.func},getInitialState:function(){return this.theme=(0,v.getThemeHelper)(),this.queue=new Promise(function(t){return t(!0)}),{displaySize:null}},componentDidMount:function(){this.getDisplaySize()},componentDidUpdate:function(){this.getDisplaySize()},getDisplaySize:function(){var t=this,n=this.props,i=n.data,a=n.layout,o=this.getContentWidth()+(0,v.getStaticData)(a.isSqueeze?"CP_GROUP_ITEM_PADDING_LR":"CP_PADDING_LR")-(i.picPaddingLRNone?0:(0,v.getStaticData)("CP_PADDING_PIC_LR"));this.contentSize!==o&&(this.contentSize=o,this.queue=this.queue.then(function(){return t.calcImageSize(o)}).then(function(n){var i=n;t.setState({displaySize:i},function(){t.context.updateEmbedContainer&&t.context.updateEmbedContainer()})}))},getImageUrl:function(t){var n=null;return t&&(t.isLink?n=t.linkUri:t.u&&t.e&&(n=t.imageUri)),n},calcImageSize:function(t){var n=this.props.data,i=null==n.picPadding?5:+n.picPadding;if(!this.imageSize){var a=[];if(n.pictures)for(var o=0,l=+(n.picNumber||1);o<l;o++){var r=n.pictures[o];r?r.width&&r.height?a.push({width:r.width,height:r.height}):a.push((0,_.getImageSize)(this.getImageUrl(r))):a.push(null)}this.imageSize=Promise.all(a)}return this.imageSize.then(function(a){return M(a,{containerWidth:t,layout:n.picLayout||1,emptyMinSize:20,gap:i})})},renderImages:function(){var t=this,n=this.props.data,i=this.state.displaySize,a=[];if(n.pictures)for(var o=0,l=+(n.picNumber||1);o<l;o++)a[o]=n.pictures[o];var s=null==n.picPadding?5:+n.picPadding,c=null==n.picPaddingTB?5:+n.picPaddingTB,h=null,p=[],m=null,g=n.picLayout;switch(a.length<=2&&g>1&&(g=1),g){case 2:h=a[0],p=a.slice(1);var y=s+(i?i.single.width+(i.group[0]||{}).width:0);m=d.default.createElement("div",{className:"fbc_pictureGroup_container clear",style:{width:y}},d.default.createElement("div",{className:"fbc_pictureGroup big",key:"pg-big"},d.default.createElement(w,{src:h?this.getImageUrl(h):null,link:h&&h.isJumpTo?h.jumpTo:null,style:{marginRight:s},size:i?i.single:null})),d.default.createElement("div",{className:"fbc_pictureGroup small",key:"pg-small"},u.default.map(p,function(n,a){return d.default.createElement(w,{src:n?t.getImageUrl(n):null,key:"pg-g-"+a,link:n&&n.isJumpTo?n.jumpTo:null,style:0===a?null:{marginTop:s},size:i?i.group[a]:null})})));break;case 3:var v=a.length;p=a.slice(0,v-1),h=a[v-1];var b=s+(i?i.single.width+(i.group[0]||{}).width:0);m=d.default.createElement("div",{className:"fbc_pictureGroup_container clear",style:{width:b}},d.default.createElement("div",{className:"fbc_pictureGroup small",key:"pg-small"},u.default.map(p,function(n,a){return d.default.createElement(w,{src:n?t.getImageUrl(n):null,key:"pg-g-"+a,link:n&&n.isJumpTo?n.jumpTo:null,style:0===a?null:{marginTop:s},size:i?i.group[a]:null})})),d.default.createElement("div",{className:"fbc_pictureGroup big",key:"pg-big"},d.default.createElement(w,{src:h?this.getImageUrl(h):null,link:h&&h.isJumpTo?h.jumpTo:null,style:{marginLeft:s},size:i?i.single:null})));break;case 1:default:m=[];for(var C=+(n.picNumber||1),I=s*(C-1),S={},_=0;_<C;_++){var x=n.pictures[_];if(i&&(I+=i.images[_].width),x)switch(x.picAlign){case 1:S.marginLeft=0;break;case 3:S.marginRight=0;break;case 2:}m.push(d.default.createElement(w,{key:"img"+_,src:x?this.getImageUrl(x):null,link:x&&x.isJumpTo?x.jumpTo:null,style:0===_?null:{marginLeft:s},size:i?i.images[_]:null}))}m=d.default.createElement("div",{className:"fbc_pictureGroup_container clear",style:r({width:I},S)},m)}return d.default.createElement("div",{className:(0,f.default)("fbc_pictureWrapper","images-"+(n.picNumber||1),"layout-"+(g||1)),style:{paddingTop:c,paddingBottom:n.isAddDescribe?0:c}},m)},renderFoldText:function(){var t=this.props.data;return t.isDescribeTextFold?d.default.createElement("span",{className:(0,f.default)("fbc_describe fbc_foldTips"),id:"sub-"+t.id},this.renderRichContent(t.describeFoldText||"",t.describeFoldText_style||null,!0)):null},renderContent:function(){var t=this.props.data;return t.picDescribe&&0!==this.getRawContent(t.picDescribe).length?d.default.createElement("span",{className:(0,f.default)("fbc_describe"),id:"sub-"+t.id},this.renderRichContent(t.picDescribe||"",t.picDescribe_style||null,!0)):null},render:function(){var t=this.props,n=t.data,i=t.style,a=L[n.picSubTitleAlign||1],o=u.default.assign({textAlign:a},this.theme.getComponentDescStyle());return d.default.createElement("div",{className:(0,f.default)("fb_component","fb_staticComponent",n.type,{"fb_staticPicPaddingNone":n.picPaddingLRNone,"fb_staticPicHasDescribe":n.isAddDescribe}),id:n.id,style:i},this.renderImages(),n.isAddDescribe?d.default.createElement(C.default,{style:o,className:(0,f.default)("fbc_foldContent",a?"fbc_fold_align_"+a:""),expandBtnClassName:"fbc_foldBtn",expandedText:(0,v.getLang)().cFoldText,collapsedText:(0,v.getLang)().cUnFoldText,tips:n.isDescribeTextFold?this.renderFoldText():null,iconStyle:{default:this.theme.getTriggerIconStyle(this.theme.NORMAL),active:this.theme.getTriggerIconStyle(this.theme.ACTIVE)},content:this.renderContent()}):null)}});n.default=B},266:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),l=a(o),r=i(216),s=a(r),u=i(156),c=a(u),d=i(208),h=a(d),f=i(23),p=a(f),m=l.default.createClass({displayName:"ChangeableDataComponent",mixins:[p.default],render:function(){var t=this.props.data;switch(+t.searchComponentType){case 2:return l.default.createElement(h.default,this.props);case 3:return l.default.createElement(s.default,this.props);case 1:default:return l.default.createElement(c.default,this.props)}}});n.default=m,t.exports=n["default"]},267:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),l=a(o),r=i(22),s=a(r),u=i(157),c=a(u),d=i(23),h=a(d),f=i(17),p=i(38),m=i(268),g=a(m),y=i(57),v=g.default.InputSearch,b=1,C=2,I=l.default.createClass({displayName:"City",mixins:[c.default,h.default],getInitialState:function(){return this.theme=(0,f.getThemeHelper)(),this.store=(0,f.getStore)(),{}},handleChange:function(e,t){var n=this.props.data;this.store.dispatch((0,p.SET_LOCATION_VALUE)({id:n.id,data:t}))},handleBlur:function(e,t){var n=this.props,i=n.fill,a=n.data;i&&!i.select&&t&&t.length>0&&this.store.dispatch((0,p.SET_LOCATION_VALUE)({id:a.id,data:{select:[t[0]]}}))},getSearchValue:function(){var t=this.props.fill;if(t){if(t.select)return t.select.value;if(t.searchText)return t.searchText}return null},renderTips:function(t){return null},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,r=t.layout,u=this.getComponentLayoutStyleInfo(),c=o&&o.length>0,d=(0,f.getDeviceInfo)(),h=y.FIELD_INFO_MAPPING[n.type]||null,p=n.componentType||b;return l.default.createElement("div",{className:(0,s.default)("fb_component",n.type),id:n.id,style:i},l.default.createElement("div",{className:"fb_componentText",style:u?u.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),l.default.createElement("div",{
className:"fb_componentBody",style:u?u.bodyStyle:null},l.default.createElement("div",{className:(0,s.default)("fbc_content_withoutGap",{fbc_widthCp:p===C}),style:{width:p===C?(this.isMobile()||r.isSqueeze?100:10*(n.cpWidth||8))+"%":null,marginTop:u?-(0,f.getStaticData)("CP_ITEM_GAP"):null}},p===b?l.default.createElement(g.default,{nodeList:a?a.struct:null,inValid:c,isMobile:this.isMobile(),geoLevel:+(n.minLevel||3),deviceInfo:d,isFixedCountry:n.isLimitCountry||!1,fixedCountry:n.limitCountry||null,onChange:this.handleChange}):l.default.createElement(v,{value:this.getSearchValue(),inValid:c,isMobile:this.isMobile(),geoLevel:+(n.minLevel||3),deviceInfo:d,icon:h?h.icon:null,iconStyle:{default:this.theme.getInputBoxIconStyle(this.theme.NORMAL),active:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),error:this.theme.getInputBoxIconStyle(this.theme.ERROR)},isFixedCountry:n.isLimitCountry||!1,fixedCountry:n.limitCountry||null,onChange:this.handleChange,onBlur:this.handleBlur})),l.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":"."})))}});n.default=I,t.exports=n["default"]},268:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}function l(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}Object.defineProperty(n,"__esModule",{value:!0});var r=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=i(6),u=a(s),c=i(19),d=a(c),h=i(22),f=a(h),p=i(210),m=a(p),g=i(23),y=a(g),v=i(17),b=i(36),C=i(197),I=i(8),S=i(269),_=a(S),x=i(270),E=a(x),N=i(53),T=a(N),O=d.default.createClass({displayName:"LocationOption",mixins:[y.default],handleMouseEnter:function(){var t=this.props,n=t.id,i=t.onChangeCurrent;i&&i(n)},handleClick:function(e){var t=this.props,n=t.id,i=t.onChange;i&&i(e,n)},render:function(){var t=this.props,n=t.isCountry,i=t.value,a=t.id,o=(t.size,t.alias),l=t.current,r=t.selected,s=t.role,u=t.ariaCurrentId;return d.default.createElement(b.BaseBtn,{component:"li",className:(0,f.default)("fbc_selectLi",{"fbc_select_current":l,"fbc_select_selected":r,"current":l,"select":r}),role:s,"aria-current":l,id:l?u:null,onClick:this.handleClick,onMouseEnter:this.handleMouseEnter},n?d.default.createElement(_.default,{id:a,name:i}):i,o?d.default.createElement("div",{className:"fbc-option-alias"},o||""):null)}}),M=d.default.createClass({displayName:"LevelDropDown",mixins:[y.default],getInitialState:function(){return this.theme=(0,v.getThemeHelper)(),{}},handleSelectOption:function(e,t){var n=this.props,i=n.onChange,a=n.level;i&&i(e,a,t)},handleResetOption:function(e){var t=this.props,n=t.onChange,i=t.level;n&&n(e,i,null)},renderContent:function(t){var n=this.props,i=n.loading,a=n.isCountry,o=t.id,l=t.text,r=t.placeholder,s=t.iconStyle;return[a?d.default.createElement("span",{key:"content",className:"fbc_selectRes"},o&&o.length>0?d.default.createElement(_.default,{id:o[0],name:l}):r):d.default.createElement("span",{key:"content-text",className:"fbc_selectRes"},l||r),i?d.default.createElement("span",{key:"loading",className:"fbc_selectArrow",style:s},d.default.createElement("span",{className:"fbc_select-drop-loading"})):d.default.createElement("span",{key:"arrow",className:"iconfont fbc_selectArrow",style:s},String.fromCharCode(58983))]},renderOption:function(t){var n=this.props,i=(n.fill,n.isCountry);return d.default.createElement(O,r({key:"l-opt-"+t.id,isCountry:i},t))},render:function(){var t=this.props,n=t.fill,i=t.inValid,a=t.options,o=t.style,l=t.deviceInfo,r={default:this.theme.getInputBoxStyle(this.theme.NORMAL),active:this.theme.getInputBoxStyle(this.theme.ACTIVE)};return o&&(r=(0,I.styleInject)(r,o)),d.default.createElement(m.default,{className:(0,f.default)("fbc_select","fbc_multiItem",{hasValue:n,error:i}),optionsClassName:(0,f.default)("fbc_options"),deviceInfo:l,placeholder:(0,v.getLang)().cSelectorPlaceholder,value:n,options:a,reset:!0,style:r,triggerStyle:this.theme.getInputBoxTriggerStyle(),iconStyle:{default:this.theme.getDropDownTriggerIconStyle(this.theme.NORMAL),active:this.theme.getDropDownTriggerIconStyle(this.theme.ACTIVE)},resetIconStyle:{default:this.theme.getDropDownResetIconStyle(this.theme.NORMAL),hover:this.theme.getDropDownResetIconStyle(this.theme.HOVER),active:this.theme.getDropDownResetIconStyle(this.theme.ACTIVE)},optionStyle:this.theme.getDropDownOptionStyle(),onRenderContent:this.renderContent,onRenderOption:this.renderOption,onReset:this.handleResetOption,onChange:this.handleSelectOption})}}),L=d.default.createClass({displayName:"LocationPicker",mixins:[y.default],getDefaultProps:function(){return{nodeList:null,geoLevel:3,isFixedCountry:!0,fixedCountry:null}},getInitialState:function(){return this.theme=(0,v.getThemeHelper)(),this.queue=Promise.resolve(!0),{lvl_0:null,lvl_1:null,lvl_2:null,lvl_3:null,lvl_4:null}},componentDidMount:function(){this.mounted=!0,this.checkNodeData()},componentWillUpdate:function(t){var n=this.props.nodeList;n!==t.nodeList&&this.checkNodeData(t)},componentWillUnmount:function(){this.mounted=!1},getNodeList:function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,i=n.nodeList,a=n.isFixedCountry,o=n.fixedCountry,t=i||[];return a&&(t[0]=o),t},checkNodeData:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,i=n.geoLevel,a=n.isFixedCountry,o={},s=this.getNodeList(n);a?o.lvl_0=null:this.queue=this.queue.then(function(){return(0,C.getLocation)(null,i).then(function(n){t.mounted&&t.setState({lvl_0:n})})});for(var u=1,c=function(n){var a=s[n-1],r="lvl_"+u;!a||t.state[r]&&a===t.state[r].pid?a||(o[r]=null):(o[r]=!0,t.queue=t.queue.then(function(){return(0,C.getLocation)(a,i).then(function(n){t.setState(l({},r,n))})})),u++},d=1;d<i+1;d++)c(d);this.setState(r({},o))},handleChangeLocation:function(e,t,n){var i=this.props.onChange;i&&i(e,{lvl:t,id:n})},renderLocationSelect:function(t){var n=this.state,i=this.props,a=i.isMobile,o=i.inValid,l=i.deviceInfo,r=this.getNodeList(this.props),s=n["lvl_"+t],c=n["lvl_"+(t+1)],h=c===!0;return s&&u.default.isPlainObject(s)&&s.data?d.default.createElement(M,{options:s.data,deviceInfo:l,key:"ldp_"+t,isCountry:0===t,loading:h,level:t,style:a?null:{width:s.maxWidth+(0===t?0:50)},fill:(r?r[t]:null)||null,inValid:o,onChange:this.handleChangeLocation}):null},renderFixedCountry:function(){var t=this.props,n=t.isFixedCountry,i=t.fixedCountry,a=t.isMobile,o=(0,C.getLocationInfo)(i);if(!n||!o)return null;var l=(0,I.styleInject)(this.theme.getInputBoxStyle(this.theme.NORMAL),a?null:{width:o.size+50});return d.default.createElement("div",{className:"fbc_multiItem fbc_select hasValue fbc_staticLocation country",style:l,key:"fixed_country"},d.default.createElement(_.default,{id:o.id,name:o.value,style:this.theme.getInputBoxExtraStyle()}))},render:function(){var t=this.props,n=(t.nodeList,t.geoLevel),i=t.isFixedCountry,a=(t.fixedCountry,[]),o=0;for(i&&(o=1,a.push(this.renderFixedCountry()));o<n+1;o++)a.push(this.renderLocationSelect(o));return d.default.createElement("div",{className:"fbc_locationPicker clear"},a)}}),P=d.default.createClass({displayName:"LocationInputSearch",mixins:[y.default],getDefaultProps:function(){return{value:null,selectedValue:null,geoLevel:3,isFixedCountry:!0,fixedCountry:null}},getInitialState:function(){return this.theme=(0,v.getThemeHelper)(),this.queue=Promise.resolve(!0),this.getSearchLocation=(0,I.asyncDebounce)(C.getLocationByTyping||u.default.noop,300),{searchText:null,options:[]}},componentDidMount:function(){this.checkOptions(this.props.value||null)},componentDidUpdate:function(){},checkOptions:function(t){var n=this;if(t!==this.state.searchText){if(!t)return void this.setState({searchText:null,options:[]});var i=this.props,a=i.isFixedCountry,o=i.fixedCountry,l=i.geoLevel;this.getSearchLocation(t,a?o:null,l).then(function(i){n.setState({searchText:t,options:i})}).catch(function(e){})}},handleChange:function(e,t,n){var i=this.props.onChange;i&&i(e,{select:n})},handleSearch:function(e){var t=this.props.onChange,n=e.target.value;this.checkOptions(n),t&&t(e,{select:null,searchText:n})},handleBlur:function(e){var t=this.props.onBlur,n=this.state.options;t&&t(e,n)},handleResetOption:function(e){var t=this.props.onChange;t&&t(e,{select:null,searchText:null})},renderOption:function(t){return d.default.createElement(O,r({key:"l-opt-"+t.id},t))},renderFixedCountry:function(){var t=this.props,n=t.isFixedCountry,i=t.fixedCountry,a=t.isMobile,o=(0,C.getLocationInfo)(i);if(!n)return null;var l=(0,I.styleInject)(this.theme.getInputBoxStyle(this.theme.NORMAL),a?null:{width:o.size+50});return d.default.createElement("div",{className:"fbc_multiItem fbc_select hasValue fbc_staticLocation country",style:l},d.default.createElement(_.default,{id:o.id,name:o.value,style:this.theme.getInputBoxExtraStyle()}))},render:function(){var t=this.props,n=t.isFixedCountry,i=t.fixedCountry,a=t.value,o=t.inValid,l=t.deviceInfo,s=t.icon,u=t.iconStyle,c=t.isMobile,h=this.state.options,p=(0,v.getLang)(),m={default:this.theme.getInputBoxStyle(this.theme.NORMAL),active:this.theme.getInputBoxStyle(this.theme.ACTIVE)};if(n&&i&&!c){var g=(0,C.getLocationInfo)(i);m=(0,I.styleInject)(m,{width:"calc(100% - "+(g.size+50+1*(0,v.getStaticData)("CP_ITEM_GAP"))+"px)"})}else n&&i&&!c||(m=(0,I.styleInject)(m,{width:"100%"}));var y=null;return n&&i||(y={icon:s,iconStyle:u}),d.default.createElement("div",{className:"fbc_locationPicker clear"},n?this.renderFixedCountry():null,d.default.createElement(E.default,r({className:(0,f.default)("fbc_multiItem",{hasValue:a,error:o}),optionsClassName:(0,f.default)("fbc_options"),inValid:o,deviceInfo:l,placeholder:p.cAddressPlaceholder,loading:p.cLocationLoading,waiting:p.cLocationWaiting,noResult:p.cLocationSearchNoResult,value:a,options:h,reset:!0,style:m},y,{triggerStyle:this.theme.getInputBoxStyle(this.theme.NORMAL,!1),inputStyle:this.theme.getInputBoxExtraStyle(),resetIconStyle:{default:this.theme.getDropDownResetIconStyle(this.theme.NORMAL),hover:this.theme.getDropDownResetIconStyle(this.theme.HOVER),active:this.theme.getDropDownResetIconStyle(this.theme.ACTIVE)},optionStyle:this.theme.getDropDownOptionStyle(),onRenderOption:this.renderOption,onReset:this.handleResetOption,onSearch:this.handleSearch,onChange:this.handleChange,onBlur:this.handleBlur})))}}),w=d.default.createClass({displayName:"LocationInput",mixins:[y.default],getInitialState:function(){return this.theme=(0,v.getThemeHelper)(),{}},handleChange:function(e){var t=this.props.onChange;t&&t(e,{content:e.target.value})},renderFixedCountry:function(){var t=this.props,n=t.isFixedCountry,i=t.fixedCountry,a=t.isMobile,o=(0,C.getLocationInfo)(i);if(!n)return null;var l=(0,I.styleInject)(this.theme.getInputBoxStyle(this.theme.NORMAL),a?null:{width:o.size+50});return d.default.createElement("div",{className:"fbc_multiItem fbc_select hasValue fbc_staticLocation country",style:l},d.default.createElement(_.default,{id:o.id,name:o.value,style:this.theme.getInputBoxExtraStyle()}))},render:function(){var t=this.props,n=t.isFixedCountry,i=t.fixedCountry,a=t.inValid,l=(t.onChange,t.icon),s=t.iconStyle,u=t.isMobile,c=o(t,["isFixedCountry","fixedCountry","inValid","onChange","icon","iconStyle","isMobile"]),h=this.theme.getInputBoxStyle(this.theme.NORMAL);if(n&&i&&!u){var p=(0,C.getLocationInfo)(i);h=(0,I.styleInject)(h,{width:u?null:"calc(100% - "+(p.size+50+1*(0,v.getStaticData)("CP_ITEM_GAP"))+"px)"})}else n&&i&&!u||(h=(0,I.styleInject)(h,{width:"100%"}));var m=null;return n&&i||(m={icon:l,iconStyle:s}),d.default.createElement("div",{className:"fbc_locationPicker clear"},n?this.renderFixedCountry():null,d.default.createElement(T.default,r({className:(0,f.default)("fbc_multiItem fbc_input",{error:a}),style:h,placeholder:(0,v.getLang)().cAddressPlaceholder,onChange:this.handleChange},m,{isMobile:u,inValid:a},c)))}});L.InputSearch=P,L.Input=w,n.default=L,t.exports=n["default"]},269:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),l=a(o),r=i(22),s=a(r),u=i(23),c=a(u),d=i(8),h=i(26),f=a(h),p={1:"ðŸ‡¨ðŸ‡³",3250:"ðŸ‡¦ðŸ‡«",3251:"ðŸ‡¦ðŸ‡±",3252:"ðŸ‡©ðŸ‡¿",3253:"ðŸ‡¦ðŸ‡©",3254:"ðŸ‡¦ðŸ‡´",3255:"ðŸ‡¦ðŸ‡¬",3256:"ðŸ‡¦ðŸ‡·",3257:"ðŸ‡¦ðŸ‡²",3258:"ðŸ‡¦ðŸ‡º",3259:"ðŸ‡¦ðŸ‡¹",3260:"ðŸ‡¦ðŸ‡¿",3261:"ðŸ‡§ðŸ‡¸",3262:"ðŸ‡§ðŸ‡­",3263:"ðŸ‡§ðŸ‡©",3264:"ðŸ‡§ðŸ‡§",3265:"ðŸ‡§ðŸ‡¾",3266:"ðŸ‡§ðŸ‡ª",3267:"ðŸ‡§ðŸ‡¿",3268:"ðŸ‡§ðŸ‡¯",3269:"ðŸ‡§ðŸ‡¹",3270:"ðŸ‡§ðŸ‡´",3272:"ðŸ‡§ðŸ‡¼",3273:"ðŸ‡§ðŸ‡·",3274:"ðŸ‡§ðŸ‡³",3275:"ðŸ‡§ðŸ‡¬",3276:"ðŸ‡§ðŸ‡«",3277:"ðŸ‡§ðŸ‡®",3278:"ðŸ‡°ðŸ‡­",3279:"ðŸ‡¨ðŸ‡²",3280:"ðŸ‡¨ðŸ‡¦",3281:"ðŸ‡¨ðŸ‡»",3282:"ðŸ‡¨ðŸ‡«",3283:"ðŸ‡¹ðŸ‡©",3284:"ðŸ‡¨ðŸ‡±",3285:"ðŸ‡¨ðŸ‡´",3286:"ðŸ‡°ðŸ‡²",3287:"ðŸ‡¨ðŸ‡¬",3288:"ðŸ‡¨ðŸ‡©",3289:"ðŸ‡¨ðŸ‡°",3290:"ðŸ‡¨ðŸ‡·",3291:"ðŸ‡¨ðŸ‡®",3292:"ðŸ‡­ðŸ‡·",3293:"ðŸ‡¨ðŸ‡º",3294:"ðŸ‡¨ðŸ‡¾",3295:"ðŸ‡¨ðŸ‡¿",3296:"ðŸ‡©ðŸ‡°",3297:"ðŸ‡©ðŸ‡¯",3298:"ðŸ‡©ðŸ‡²",3299:"ðŸ‡©ðŸ‡´",3300:"ðŸ‡ªðŸ‡¨",3301:"ðŸ‡ªðŸ‡¬",3302:"ðŸ‡¸ðŸ‡»",3303:"ðŸ‡¬ðŸ‡¶",3304:"ðŸ‡ªðŸ‡·",3305:"ðŸ‡ªðŸ‡ª",3306:"ðŸ‡ªðŸ‡¹",3307:"ðŸ‡«ðŸ‡¯",3308:"ðŸ‡«ðŸ‡®",3309:"ðŸ‡«ðŸ‡·",3310:"ðŸ‡¬ðŸ‡¦",3311:"ðŸ‡¬ðŸ‡²",3312:"ðŸ‡¬ðŸ‡ª",3313:"ðŸ‡©ðŸ‡ª",3314:"ðŸ‡¬ðŸ‡­",3315:"ðŸ‡¬ðŸ‡·",3316:"ðŸ‡¬ðŸ‡©",3317:"ðŸ‡¬ðŸ‡¹",3318:"ðŸ‡¬ðŸ‡³",3319:"ðŸ‡¬ðŸ‡¼",3320:"ðŸ‡¬ðŸ‡¾",3321:"ðŸ‡­ðŸ‡¹",3322:"ðŸ‡­ðŸ‡³",3323:"ðŸ‡­ðŸ‡º",3324:"ðŸ‡®ðŸ‡¸",3325:"ðŸ‡®ðŸ‡³",3326:"ðŸ‡®ðŸ‡©",3327:"ðŸ‡®ðŸ‡·",3328:"ðŸ‡®ðŸ‡¶",3329:"ðŸ‡®ðŸ‡ª",3330:"ðŸ‡®ðŸ‡±",3331:"ðŸ‡®ðŸ‡¹",3332:"ðŸ‡¯ðŸ‡²",3333:"ðŸ‡¯ðŸ‡µ",3334:"ðŸ‡¯ðŸ‡´",3335:"ðŸ‡°ðŸ‡¿",3336:"ðŸ‡°ðŸ‡ª",3337:"ðŸ‡°ðŸ‡®",3338:"ðŸ‡°ðŸ‡·",3339:"ðŸ‡½ðŸ‡°",3340:"ðŸ‡°ðŸ‡¼",3341:"ðŸ‡°ðŸ‡¬",3342:"ðŸ‡±ðŸ‡¦",3343:"ðŸ‡±ðŸ‡»",3344:"ðŸ‡±ðŸ‡§",3345:"ðŸ‡±ðŸ‡¸",3346:"ðŸ‡±ðŸ‡·",3347:"ðŸ‡±ðŸ‡¾",3348:"ðŸ‡±ðŸ‡®",3349:"ðŸ‡±ðŸ‡¹",3350:"ðŸ‡±ðŸ‡º",3351:"ðŸ‡²ðŸ‡°",3352:"ðŸ‡²ðŸ‡¬",3353:"ðŸ‡²ðŸ‡¼",3354:"ðŸ‡²ðŸ‡¾",3355:"ðŸ‡²ðŸ‡»",3356:"ðŸ‡²ðŸ‡±",3357:"ðŸ‡²ðŸ‡¹",3358:"ðŸ‡²ðŸ‡­",3359:"ðŸ‡²ðŸ‡·",3360:"ðŸ‡²ðŸ‡º",3361:"ðŸ‡²ðŸ‡½",3362:"ðŸ‡«ðŸ‡²",3363:"ðŸ‡²ðŸ‡©",3364:"ðŸ‡²ðŸ‡¨",3365:"ðŸ‡²ðŸ‡³",3366:"ðŸ‡²ðŸ‡ª",3367:"ðŸ‡²ðŸ‡¦",3368:"ðŸ‡²ðŸ‡¿",3369:"ðŸ‡²ðŸ‡²",3371:"ðŸ‡³ðŸ‡¦",3372:"ðŸ‡³ðŸ‡·",3373:"ðŸ‡³ðŸ‡µ",3374:"ðŸ‡³ðŸ‡±",3375:"ðŸ‡³ðŸ‡¿",3376:"ðŸ‡³ðŸ‡®",3377:"ðŸ‡³ðŸ‡ª",3378:"ðŸ‡³ðŸ‡¬",3379:"ðŸ‡³ðŸ‡º",3381:"ðŸ‡³ðŸ‡´",3382:"ðŸ‡´ðŸ‡²",3383:"ðŸ‡µðŸ‡°",3384:"ðŸ‡µðŸ‡¼",3386:"ðŸ‡µðŸ‡¦",3387:"ðŸ‡µðŸ‡¬",3388:"ðŸ‡µðŸ‡¾",3389:"ðŸ‡°ðŸ‡µ",3390:"ðŸ‡µðŸ‡ª",3391:"ðŸ‡µðŸ‡­",3392:"ðŸ‡µðŸ‡±",3393:"ðŸ‡µðŸ‡¹",3395:"ðŸ‡¶ðŸ‡¦",3396:"ðŸ‡·ðŸ‡´",3397:"ðŸ‡·ðŸ‡º",3398:"ðŸ‡·ðŸ‡¼",3402:"ðŸ‡¼ðŸ‡¸",3403:"ðŸ‡¸ðŸ‡²",3405:"ðŸ‡¸ðŸ‡¦",3406:"ðŸ‡¸ðŸ‡³",3407:"ðŸ‡·ðŸ‡¸",3408:"ðŸ‡¸ðŸ‡¨",3409:"ðŸ‡¸ðŸ‡±",3410:"ðŸ‡¸ðŸ‡¬",3411:"ðŸ‡¸ðŸ‡°",3412:"ðŸ‡¸ðŸ‡®",3413:"ðŸ‡¸ðŸ‡§",3414:"ðŸ‡¸ðŸ‡´",3416:"ðŸ‡¿ðŸ‡¦",3418:"ðŸ‡¸ðŸ‡¸",3419:"ðŸ‡ªðŸ‡¸",3420:"ðŸ‡±ðŸ‡°",3421:"ðŸ‡¸ðŸ‡©",3422:"ðŸ‡¸ðŸ‡·",3423:"ðŸ‡¸ðŸ‡¿",3424:"ðŸ‡¸ðŸ‡ª",3425:"ðŸ‡¨ðŸ‡­",3426:"ðŸ‡¸ðŸ‡¾",3427:"ðŸ‡¹ðŸ‡¯",3428:"ðŸ‡¹ðŸ‡¿",3429:"ðŸ‡¹ðŸ‡­",3430:"ðŸ‡¹ðŸ‡±",3431:"ðŸ‡¹ðŸ‡¬",3432:"ðŸ‡¹ðŸ‡´",3434:"ðŸ‡¹ðŸ‡³",3435:"ðŸ‡¹ðŸ‡·",3436:"ðŸ‡¹ðŸ‡²",3437:"ðŸ‡¹ðŸ‡»",3438:"ðŸ‡ºðŸ‡¬",3439:"ðŸ‡ºðŸ‡¦",3440:"ðŸ‡¦ðŸ‡ª",3441:"ðŸ‡¬ðŸ‡§",3442:"ðŸ‡ºðŸ‡¸",3443:"ðŸ‡ºðŸ‡¾",3444:"ðŸ‡ºðŸ‡¿",3445:"ðŸ‡»ðŸ‡º",3447:"ðŸ‡»ðŸ‡ª",3448:"ðŸ‡»ðŸ‡³",3449:"ðŸ‡ªðŸ‡­",3450:"ðŸ‡¾ðŸ‡ª",3451:"ðŸ‡¿ðŸ‡²",3452:"ðŸ‡¿ðŸ‡¼",3453:"ðŸ‡¦ðŸ‡¸",3454:"ðŸ‡¦ðŸ‡®",3455:"ðŸ‡¦ðŸ‡¼",3456:"ðŸ‡§ðŸ‡²",3457:"ðŸ‡®ðŸ‡´",3458:"ðŸ‡°ðŸ‡¾",3459:"ðŸ‡¨ðŸ‡½",3460:"ðŸ‡¨ðŸ‡¨",3461:"ðŸ‡¨ðŸ‡¼",3462:"ðŸ‡«ðŸ‡°",3463:"ðŸ‡«ðŸ‡´",3464:"ðŸ‡µðŸ‡«",3465:"ðŸ‡¬ðŸ‡®",3466:"ðŸ‡¬ðŸ‡±",3467:"ðŸ‡¬ðŸ‡º",3468:"ðŸ‡¬ðŸ‡¬",3469:"ðŸ‡¯ðŸ‡ª",3470:"ðŸ‡®ðŸ‡²",3471:"ðŸ‡¾ðŸ‡¹",3472:"ðŸ‡²ðŸ‡¸",3473:"ðŸ‡³ðŸ‡¨",3474:"ðŸ‡³ðŸ‡«",3475:"ðŸ‡²ðŸ‡µ",3476:"ðŸ‡µðŸ‡³",3477:"ðŸ‡µðŸ‡·",3478:"ðŸ‡·ðŸ‡ª",3481:"ðŸ‡¸ðŸ‡½",3484:"ðŸ‡¹ðŸ‡°",3485:"ðŸ‡¹ðŸ‡¦",3487:"ðŸ‡»ðŸ‡¬"},m=l.default.createClass({displayName:"Country",mixins:[c.default],render:function(){var t=this.props,n=t.id,i=t.name,a=t.className,o=t.style,r=d.deviceInfo.os,u=null;return u=r.tablet||r.phone?p[n]:l.default.createElement(f.default,{src:"images/nationalFlag/"+n+".gif"}),l.default.createElement("span",{className:(0,s.default)("base-country",a),style:o},l.default.createElement("span",{className:"base-country-flag"},u),l.default.createElement("span",{className:"base-country-name"},i))}});n.default=m,t.exports=n["default"]},270:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function l(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function s(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function u(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0}),n.InputClickTrigger=void 0;var c=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},d=function(){function t(t,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(n,i,a){return i&&t(n.prototype,i),a&&t(n,a),n}}(),h=i(6),f=a(h),p=i(22),m=a(p),g=i(19),y=a(g),v=i(211),b=(a(v),i(23)),C=a(b),I=i(36),S=i(53),_=a(S),x=i(210),E=n.InputClickTrigger=function(t){function n(){var t,i,a,o;r(this,n);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return i=a=s(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(u))),a.handleMouseDown=function(e){e.stopPropagation()},a.handleClick=function(e){var t=a.props,n=t.onClick,i=(t.close,t.open),o=(t.contentVisible,t.disabled);o||(i(),a.focused=!0,setTimeout(function(){a.triggerField&&a.triggerField.focus()},150),n&&n(e))},a.handleFocus=function(e){var t=a.props,n=t.focus,i=t.onFocus,o=t.open,l=t.contentVisible,r=t.disabled;n&&(l||r||a.focused||(o(),i&&i(e)))},a.handleBlur=function(e){var t=a.props,n=t.focus,i=t.onBlur;n&&(e.preventDefault(),i&&i(e))},a.refTriggerContainer=function(t){a.props.onTriggerRefChange&&a.props.onTriggerRefChange(t)},a.refTrigger=function(t){t?a.triggerField=t.getInputRef():a.triggerField=null},o=i,s(a,o)}return u(n,t),d(n,[{key:"render",value:function(){var t=this.props,n=t.prefix,i=t.className,a=t.placeholder,o=t.deviceInfo,l=t.inValid,r=t.children,s=t.onKeyDown,u=t.onChange,c=t.style,d=t.disabled,h=t.value;return y.default.createElement("div",{className:(0,m.default)("mg-inputTrigger",i),ref:this.refTriggerContainer,onMouseDown:this.handleMouseDown},y.default.createElement(_.default,{prefix:n,className:(0,m.default)("fbc_input",{"error":l}),ref:this.refTrigger,style:c,disabled:d,placeholder:a,value:h,deviceInfo:o,onChange:u,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick,onKeyDown:s}),r)}}]),n}(v.ClickTrigger),N={KEY_ENTER:13,KEY_SPACE:32,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40},T=y.default.createClass({displayName:"InputSearch",mixins:[C.default],getDefaultProps:function(){return{prefix:"mg",disabled:!1,open:!1,placeholder:"Please select",loading:"Searching...",noResult:"No match options.",waiting:"Type on, please...",defaultValue:null,value:null,options:[],focus:!0,autoWidth:!0,cushion:-1,onRenderOption:null,reset:!1,onReset:f.default.noop,onSearch:f.default.noop,onChange:f.default.noop,onClick:f.default.noop}},getInitialState:function(){var t=[],n=this.props;n.value?t=t.concat(n.value):n.defaultValue&&(t=t.concat(n.defaultValue)),t=this.filterSelected(n,t),this.displayBottom=!0;var i="";return f.default.find(n.options,{id:t[0]})||(n.value||n.defaultValue)&&(i=[].concat(n.value||n.defaultValue)[0]),{selected:t,searchText:i,open:n.open}},componentWillReceiveProps:function(t){var n=f.default.find(t.options,{value:t.value});if(n&&(void 0!==t.value||void 0!==this.props.value)&&t.value!==this.props.value&&n){var i=this.filterSelected(t,n.id);this.setState({selected:i})}},filterSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments[1];n=[].concat(n);var i=f.default.filter(f.default.uniq(n),function(t){return null!==t&&void 0!==t}).sort();return!t.multiple&&i.length>1&&(i=[i[0]]),i},open:function(){this.setState({open:!0})},close:function(){this.setState({open:!1})},handlePopoverVisibleChange:function(t){t?this.props.onClick(t):this.setState({optionsReady:!1}),this.setState({open:t})},handleOptionReady:function(){this.setState({optionsReady:!0})},handleKeyDown:function(e){var t=this.state.open,n=e.keyCode;switch(n){case N.KEY_ESC:this.close();break;case N.KEY_DOWN:e.preventDefault(),this.options.hoverNext(e);break;case N.KEY_UP:e.preventDefault(),this.options.hoverPrev(e);break;case N.KEY_ENTER:case N.KEY_SPACE:if(!t){this.open();break}e.preventDefault(),this.options.select(e)}},handleReset:function(e){e.stopPropagation(),e.preventDefault();var t=this.props.onReset;t(e,null),this.setState({selected:null})},handleOptionChange:function(e,t){var n=this.state.selected,i=this.props,a=i.multiple,o=i.options,l=i.onChange;if(a){var r=(n||[]).indexOf(t);n=(n||[]).slice(),r>-1?n.splice(r,1):n.push(t)}else n=[t],this.close();l(e,t,f.default.map(n,function(t){return f.default.find(o,{id:t})})),this.setState({selected:n})},handlePositionUpdated:function(t){"position-bottom-left"===t.position.name&&(this.displayBottom=!0),"position-top-left"===t.position.name&&(this.displayBottom=!1)},refPopover:function(t){this.popover=t},refOptions:function(t){this.options=t},getStyle:function(t){var n=this.state.open,i=this.props.disabled;if(t&&t.default){var a=t.default;return i&&t.disabled?a=f.default.assign({},a,t.disabled):(t.focus||t.active)&&n&&(a=f.default.assign({},a,t.active,t.focus)),a}return t},getTrueOptionStyle:function(t){var n=f.default.assign({},t),i=n.borderTopColor||n.borderColor,a=n.borderBottomColor||n.borderColor;return this.displayBottom?(n.borderTopColor=i,n.borderBottomColor=a):(n.borderTopColor=a,n.borderBottomColor=i),n},getText:function(){var t=this.props.options,n=this.filterSelected(this.props,this.state.selected),i=[];return f.default.forEach(n,function(n){var a=f.default.find(t,{id:n});a&&i.push(a.value)}),f.default.trim(i.join("; "))},render:function(){var t,n=this.props,i=n.prefix,a=n.placeholder,r=n.className,s=n.disabled,u=n.value,d=n.onSearch,h=n.onClick,f=n.focus,p=n.onFocus,g=n.onBlur,b=n.cushion,C=n.reset,S=n.inValid,_=n.style,N=n.triggerStyle,T=n.inputStyle,O=n.resetIconStyle,M=n.optionStyle,L=n.deviceInfo,P=(n.onRenderContent,n.icon),w=n.iconStyle,B=l(n,["prefix","placeholder","className","disabled","value","onSearch","onClick","focus","onFocus","onBlur","cushion","reset","inValid","style","triggerStyle","inputStyle","resetIconStyle","optionStyle","deviceInfo","onRenderContent","icon","iconStyle"]),R=this.state,A=R.selected,D=R.open,k="bb-drop",z=!B.options||0===B.options.length,F=u,V=null;return z&&(V=F?B.noResult:B.waiting),y.default.createElement(v.Popover,{ref:this.refPopover,position:v.Position.Auto,visible:!s&&D,cushion:b,style:this.getStyle(_),className:(0,m.default)(L.isMobile?"pop-content":"drop-content",i+"-select-content",L.isMobile?"drop-mobile":null),wrapperClassName:(0,m.default)(r,(t={},o(t,k+"focus",D&&!s),o(t,k+"disabled",s),t)),onVisibleChange:this.handlePopoverVisibleChange,onPositionUpdated:this.handlePositionUpdated,onPositionReady:this.handleOptionReady},y.default.createElement(E,{prefix:i,className:(0,m.default)({"has-reset":C}),focus:f,deviceInfo:L,value:u,placeholder:a,inValid:S,icon:P,iconStyle:w,style:N,inputStyle:T,disabled:s,onChange:d,onClick:h,onFocus:p,onBlur:g,onKeyDown:this.handleKeyDown},C&&A&&A.length>0?y.default.createElement(I.BaseBtn,{className:"iconfont "+i+"-reset fbc-select-reset",style:O,onClick:this.handleReset},String.fromCharCode(58982)):null),y.default.createElement(v.Content,null,y.default.createElement(x.Options,c({ref:this.refOptions,prefix:i,selected:A,popover:this.popover},B,{notFoundContent:V,onOptionChange:this.handleOptionChange,sizeFixer:0,style:this.getTrueOptionStyle(this.getStyle(M))}))))}});n.default=T},271:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),l=a(o),r=i(22),s=a(r),u=i(157),c=a(u),d=i(23),h=a(d),f=i(17),p=i(38),m=i(268),g=a(m),y=i(53),v=a(y),b=i(8),C=i(57),I=g.default.Input,S=1,_=l.default.createClass({displayName:"Address",mixins:[c.default,h.default],getInitialState:function(){return this.theme=(0,f.getThemeHelper)(),this.store=(0,f.getStore)(),{}},handleChange:function(e,t){var n=this.props.data;this.store.dispatch((0,p.SET_LOCATION_VALUE)({id:n.id,data:t}))},handleChangeAddressDetail:function(e){var t=this.props.data;this.store.dispatch((0,p.SET_LOCATION_VALUE)({id:t.id,data:{content:e.target.value}}))},handleChangeAddressZipCode:function(e){var t=this.props.data;this.store.dispatch((0,p.SET_LOCATION_VALUE)({id:t.id,data:{zipCode:e.target.value}}))},renderTips:function(t){return null},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,r=t.layout,u=this.getComponentLayoutStyleInfo(),c=o&&o.length>0,d=(0,f.getDeviceInfo)(),h=(0,f.getLang)(),p=C.FIELD_INFO_MAPPING[n.type]||null,m=n.componentType||S;return l.default.createElement("div",{className:(0,s.default)("fb_component",n.type),id:n.id,style:i},l.default.createElement("div",{className:"fb_componentText",style:u?u.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),l.default.createElement("div",{className:"fb_componentBody",style:u?u.bodyStyle:null},l.default.createElement("div",{className:(0,s.default)("fbc_content_withoutGap","fbc_widthCp"),style:{width:(this.isMobile()||r.isSqueeze?100:10*(n.cpWidth||8))+"%",marginTop:u?-(0,f.getStaticData)("CP_ITEM_GAP"):null}},m===S?l.default.createElement("div",{tabIndex:0,"aria-labelledby":this.ariaLabelTriggerOrder()},l.default.createElement(g.default,{key:"picker",deviceInfo:d,nodeList:a?a.struct:null,inValid:c,isMobile:this.isMobile(),geoLevel:+(n.minLevel||4),isFixedCountry:n.isLimitCountry||!1,fixedCountry:n.limitCountry||null,onChange:this.handleChange}),l.default.createElement("div",{className:"fbc_content_detail clear",key:"detail"},l.default.createElement(v.default,{className:(0,s.default)("fbc_multiItem fbc_input address",{error:c}),tabIndex:0,"aria-label":h.cAddressDetailsPlaceholder+"."+(a?a.content||"":""),style:(0,b.styleInject)(this.theme.getInputBoxStyle(this.theme.NORMAL),{width:""+(this.isMobile()||r.isSqueeze?"100%":"calc(75% - "+(0,f.getStaticData)("CP_ITEM_GAP")+"px)"),marginRight:this.isMobile()?0:null}),inputStyle:this.theme.getInputBoxExtraStyle(),deviceInfo:d,placeholder:h.cAddressDetailsPlaceholder,value:a?a.content:"",onChange:this.handleChangeAddressDetail}),l.default.createElement(v.default,{className:(0,s.default)("fbc_multiItem fbc_input zipCode",{error:c}),tabIndex:0,"aria-label":h.cAddressCodePlaceholder+"."+(a?a.zipCode||"":""),style:(0,b.styleInject)(this.theme.getInputBoxStyle(this.theme.NORMAL),{width:(this.isMobile()||r.isSqueeze?100:25)+"%",marginRight:this.isMobile()?0:null}),inputStyle:this.theme.getInputBoxExtraStyle(),deviceInfo:d,placeholder:h.cAddressCodePlaceholder,value:a?a.zipCode:"",onChange:this.handleChangeAddressZipCode}))):l.default.createElement(I,{value:a?a.content:"",inValid:c,isMobile:this.isMobile(),geoLevel:+(n.minLevel||4),deviceInfo:d,"aria-labelledby":this.ariaLabelTriggerOrder(),isFixedCountry:n.isLimitCountry||!1,fixedCountry:n.limitCountry||null,inputStyle:this.theme.getInputBoxExtraStyle(),icon:p?p.icon:null,iconStyle:{default:this.theme.getInputBoxIconStyle(this.theme.NORMAL),active:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),error:this.theme.getInputBoxIconStyle(this.theme.ERROR)},onChange:this.handleChange})),l.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":"."})))}});n.default=_,t.exports=n["default"]},272:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},l=i(19),r=a(l),s=i(20),u=a(s),c=i(6),d=a(c),h=i(22),f=a(h),p=i(157),m=a(p),g=i(23),y=a(g),v=i(53),b=a(v),C=i(17),I=i(8),S=i(57),_=i(36),x=i(241),E=i(38),N=r.default.createClass({displayName:"WxItem",mixins:[m.default,y.default],getInitialState:function(){return this.theme=(0,C.getThemeHelper)(),this.store=(0,C.getStore)(),this.wx=(0,C.getWx)(),this.measureSize=d.default.debounce(this._measureSize,120),{wxButtonWidth:null,wxButtonFontSize:null}},componentWillReceiveProps:function(t){this.props.contentWidth!==t.contentWidth&&this.measureSize()},componentDidMount:function(){this.measureSize(),this.unsubscribe=this.store.addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe&&this.unsubscribe()},handleStateChange:function(t){t.type!==E._WX_AUTH_FAILED&&t.type!==E._WX_AUTH_SUCCEED||(this.requiring=!1,this.setState({requirePending:!1}))},_measureSize:function(){var t=this,n=this.wx.isWx&&!(0,I.inIframe)();if(!n)return void this.setState({wxButtonWidth:0,wxButtonFontSize:0});var i=(0,C.getLang)();this.fontInfo||(this.fontInfo=(0,I.getFontInfo)(u.default.findDOMNode(this.authBtn)));var a=i.cWxAuth,o=this.props.contentWidth,l=function(n){return(0,I.getTextWidth)(a,n+"px/"+t.fontInfo.lineHeight+" "+t.fontInfo.font)+2*(n-4)},r=this.fontInfo.fontSize,s=null;for(s=l(r);s>.4*o&&r>12;)r--,s=l(r);this.setState({wxButtonWidth:s,wxButtonFontSize:r})},handleRequireAuthMsg:function(e){var t=this.props.onRequireAuthMessage;this.requiring||(this.requiring=!0,this.setState({requirePending:!0},function(){t()}))},handleIncrease:function(e){var t=this.props,n=t.idx,i=t.onIncrease;i&&i(e,n)},handleRemove:function(e){var t=this.props,n=t.idx,i=t.onRemove;i&&i(e,n)},handleChange:function(e){var t=this.props,n=t.idx,i=t.onChange;i&&i(e,n)},handleBlur:function(e){var t=this.props,n=t.idx,i=t.onBlur;i&&i(e,n)},refAuthBtn:function(t){this.authBtn=t},render:function(){var t=this.props,n=t.icon,i=t.inValid,a=t.limit,o=t.idx,l=t.total,s=t.placeholder,u=t.value,c=t.hasError,h=t.deviceInfo,p=l===a,m=this.wx.isWx&&!(0,I.inIframe)(),g=this.state,y=g.wxButtonWidth,v=g.wxButtonFontSize,S=g.requirePending,x=(0,C.getLang)(),E=!1;if(i){var N=c("contentRegex");if(N&&d.default.isPlainObject(N)){if(N.info){var T=N.info.errorContent||[];E=T.indexOf(u)>-1}}else E=!0}var O={baseFontSize:v,baseWidth:y},M=x.cWxAuth;return r.default.createElement("div",{className:(0,f.default)("fbc_wxAuthWrapper","fbc_content_item")},r.default.createElement("div",{className:"fbc_sendAuth",style:{width:y?"calc(100% - "+(y+(0,C.getStaticData)("CP_ITEM_GAP"))+"px)":null}},r.default.createElement(b.default,{className:(0,f.default)("fbc_input","fbc_wx_content",{error:E}),deviceInfo:h,tabIndex:0,inValid:E,icon:n,placeholder:s,"aria-invalid":E,style:this.theme.getInputBoxStyle(this.theme.NORMAL,!!n),iconStyle:{default:this.theme.getInputBoxIconStyle(this.theme.NORMAL),active:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),error:this.theme.getInputBoxIconStyle(this.theme.ERROR)},value:u||"",onChange:this.handleChange,onBlur:this.handleBlur},r.default.createElement("span",{className:"fbc_imOperate"},l>1?r.default.createElement(_.BaseBtn,{component:"a",className:"iconfont fbc_removeIcon",style:{default:this.theme.getInputBoxOptIconStyle(this.theme.NORMAL,{isRemove:!0}),hover:this.theme.getInputBoxOptIconStyle(this.theme.HOVER,{isRemove:!0}),active:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE,{isRemove:!0}),focus:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE,{isRemove:!0})},onClick:this.handleRemove},String.fromCharCode(58980)):null,l!==o+1||p?null:r.default.createElement(_.BaseBtn,{component:"a",className:"iconfont fbc_addIcon",style:{default:this.theme.getInputBoxOptIconStyle(this.theme.NORMAL),hover:this.theme.getInputBoxOptIconStyle(this.theme.HOVER),
active:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE)},onClick:this.handleIncrease},String.fromCharCode(58979)))),m?r.default.createElement(_.BaseBtn,{className:"fbc_getWxAuth fbc_sendMsgAuth",ref:this.refAuthBtn,loading:S,style:{default:this.theme.getInputBoxExtButtonStyle(this.theme.NORMAL,O),active:this.theme.getInputBoxExtButtonStyle(this.theme.ACTIVE,O),focus:this.theme.getInputBoxExtButtonStyle(this.theme.ACTIVE,O),error:this.theme.getInputBoxExtButtonStyle(this.theme.ERROR,O),disabled:this.theme.getInputBoxExtButtonStyle(this.theme.DISABLED,O)},onClick:this.handleRequireAuthMsg},M):null))}}),T=r.default.createClass({displayName:"WeChatInputGroup",mixins:[m.default,y.default],getInitialState:function(){return this.theme=(0,C.getThemeHelper)(),this.getGroupFill=(0,I.memo)(this._getGroupFill),{}},_getGroupFill:function(t){return d.default.isArray(t)?t:[t]},handleIncrease:function(e,t){this.props.onIncreaseItem&&this.props.onIncreaseItem(e,t)},handleRemove:function(e,t){this.props.onRemoveItem&&this.props.onRemoveItem(e,t)},render:function(){for(var t=this.props,n=t.fill,i=t.data,a=t.inValid,o=t.valid,l=t.deviceInfo,s=t.limit,u=t.fieldExtInfo,c=t.onChange,d=t.onBlur,h=t.onRequireAuthMessage,f=[],p=this.getGroupFill(n),m=Math.max(1,p?p.length:1),g=0;g<m;g++)0===g?f.push(r.default.createElement(N,{key:"contentItemWx",deviceInfo:l,hasError:this.hasError,placeholder:i.placeholder,inValid:a,valid:o,idx:g,total:m,limit:s,value:p&&p[g],icon:u?u.icon:null,onIncrease:this.handleIncrease,onRemove:this.handleRemove,onRequireAuthMessage:h,onChange:c,onBlur:d})):f.push(r.default.createElement(x.InputGroupItem,{key:"contentItem"+g,deviceInfo:l,hasError:this.hasError,placeholder:i.placeholder,inValid:a,valid:o,idx:g,total:m,limit:s,value:p&&p[g],icon:u?u.icon:null,onIncrease:this.handleIncrease,onRemove:this.handleRemove,onChange:c,onBlur:d}));return r.default.createElement("div",{className:"fbc_content_groupList"},f)}}),O=r.default.createClass({displayName:"WeChat",mixins:[m.default,y.default],getInitialState:function(){return this.theme=(0,C.getThemeHelper)(),this.store=(0,C.getStore)(),{}},componentDidMount:function(){this.unsubscribe=this.store.addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe&&this.unsubscribe()},handleStateChange:function(t){},handleRequireAuthMsg:function(){var t=this.props.data;this.store.dispatch((0,E.WX_AUTH)({id:t.id}))},handleChange:function(e,t){var n=this.props.data;this.store.dispatch((0,E.SET_MULTI_INPUT_VALUE)({id:n.id,idx:t,value:e.target.value}))},handleBlur:function(e,t){var n=this.props.data;this.store.dispatch((0,E.BLUR_MULTI_INPUT)({id:n.id,idx:t,value:e.target.value}))},handleIncreaseItem:function(e,t){var n=this.props.data;this.store.dispatch((0,E.ADD_MULTI_INPUT_ITEM)({id:n.id,idx:t}))},handleRemoveItem:function(e,t){var n=this.props.data;this.store.dispatch((0,E.REMOVE_MULTI_INPUT_ITEM)({id:n.id,idx:t}))},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,l=t.valid,s=t.layout,u=(0,C.getDeviceInfo)(),c=1===n.isAcceptMulti,d=S.FIELD_INFO_MAPPING[n.type],h=this.getComponentLayoutStyleInfo(),p=l&&l.length>0,m={deviceInfo:u,data:n,fill:a,inValid:p,valid:l,fieldExtInfo:d,contentWidth:this.getContentWidth()};return r.default.createElement("div",{className:(0,f.default)("fb_component",n.type),id:n.id,style:i},r.default.createElement("div",{className:"fb_componentText",style:h?h.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderError(this.theme.getComponentErrorStyle())),r.default.createElement("div",{className:"fb_componentBody",style:h?h.bodyStyle:null},r.default.createElement("div",{className:(0,f.default)("fbc_content","fbc_widthCp"),style:{width:(this.isMobile()||s.isSqueeze?100:10*(n.cpWidth||8))+"%",marginTop:h?0:null}},r.default.createElement(T,o({},m,{onChange:this.handleChange,onBlur:this.handleBlur,limit:!c&&1,onRequireAuthMessage:this.handleRequireAuthMsg,onIncreaseItem:this.handleIncreaseItem,onRemoveItem:this.handleRemoveItem}))),r.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=O,t.exports=n["default"]}});